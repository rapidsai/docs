<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"><meta content="Docutils 0.18.1: http://docutils.sourceforge.net/" name="generator">

    <title>Installation &mdash; raft 23.04.00 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet">
  <link as="font" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2">
<link as="font" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2">
<link as="font" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" rel="preload" type="font/woff2">

    <link href="_static/pygments.css" rel="stylesheet" type="text/css">
    <link href="_static/copybutton.css" rel="stylesheet" type="text/css">
    <link href="_static/references.css" rel="stylesheet" type="text/css">
    <link href="https://docs.rapids.ai/assets/css/custom.css" rel="stylesheet" type="text/css">
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" rel="preload">
<link as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" rel="preload">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script defer="defer" src="https://docs.rapids.ai/assets/js/custom.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'build';</script>
    <link href="genindex.html" rel="index" title="Index">
    <link href="search.html" rel="search" title="Search">
    <link href="developer_guide.html" rel="next" title="Developer Guide">
    <link href="quick_start.html" rel="prev" title="Quick Start">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="en" name="docsearch:language">
  <script id="rapids-selector-pixel-src" src="https://assets.adobedtm.com/5d4962a43b79/814eb6e9b4e1/launch-4bc07f1e0b0b.min.js"></script><link href="/assets/css/custom.css" id="rapids-selector-css" rel="stylesheet"></head>
  
  
  <body data-bs-root-margin="0px 0px -60%" data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-default-mode data-offset="180">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input class="sidebar-toggle" id="__primary" name="__primary" type="checkbox">
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input class="sidebar-toggle" id="__secondary" name="__secondary" type="checkbox">
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form action="search.html" class="bd-search d-flex align-items-center" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input aria-label="Search the docs ..." autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." spellcheck="false" type="search">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">raft 23.04.00 documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="navbar-header-items">
    
    <div class="ms-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p aria-label="Site Navigation" aria-level="1" class="sidebar-header-items__title" role="heading">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="quick_start.html">
                        Quick Start
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="developer_guide.html">
                        Developer Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cpp_api.html">
                        C++ API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="pylibraft_api.html">
                        Python API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button aria-expanded="false" aria-haspopup="true" class="btn dropdown-toggle nav-item" data-bs-toggle="dropdown" type="button">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="raft_dask_api.html">
                        RAFT Dask API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="using_comms.html">
                        Using RAFT Comms
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="using_libraft.html">
                        Using The Pre-Compiled Binary
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributing.html">
                        Contributing
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul aria-label="Icon Links" class="navbar-icon-links navbar-nav">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a class="nav-link" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/rapidsai/raft" rel="noopener" target="_blank" title="GitHub"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a class="nav-link" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/rapidsai" rel="noopener" target="_blank" title="Twitter"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide"><div id="rapids-pydata-container"><div class="rapids-home-container"><a class="rapids-home-container__home-btn" href="/api">Home</a></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">raft</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/clx/stable/api.html">clx</a><a class="rapids-selector__menu-item" href="/api/cucim/stable/api.html">cucim</a><a class="rapids-selector__menu-item" href="/api/cudf/stable/index.html">cudf</a><a class="rapids-selector__menu-item" href="/api/cudf-java/stable">cudf-java</a><a class="rapids-selector__menu-item" href="/api/cugraph/stable">cugraph</a><a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">cuml</a><a class="rapids-selector__menu-item" href="/api/cusignal/stable/api.html">cusignal</a><a class="rapids-selector__menu-item" href="/api/cuspatial/stable">cuspatial</a><a class="rapids-selector__menu-item" href="/api/cuxfilter/stable">cuxfilter</a><a class="rapids-selector__menu-item" href="/api/dask-cuda/stable/api.html">dask-cuda</a><a class="rapids-selector__menu-item" href="/api/kvikio/stable/api.html">kvikio</a><a class="rapids-selector__menu-item" href="/api/libcudf/stable/namespacecudf.html">libcudf</a><a class="rapids-selector__menu-item" href="/api/libcugraph/stable">libcugraph</a><a class="rapids-selector__menu-item" href="/api/libcuml/stable">libcuml</a><a class="rapids-selector__menu-item" href="/api/libcuspatial/stable">libcuspatial</a><a class="rapids-selector__menu-item" href="/api/libkvikio/stable">libkvikio</a><a class="rapids-selector__menu-item" href="/api/librmm/stable/annotated.html">librmm</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/raft/stable">raft</a><a class="rapids-selector__menu-item" href="/api/rapids-cmake/stable/api.html">rapids-cmake</a><a class="rapids-selector__menu-item" href="/api/rmm/stable/api.html">rmm</a></div></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">nightly (23.04)</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/raft/nightly">nightly (23.04)</a><a class="rapids-selector__menu-item" href="/api/raft/stable">stable (23.02)</a><a class="rapids-selector__menu-item" href="/api/raft/legacy">legacy (22.12)</a></div></div></div>
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p aria-label="Site Navigation" aria-level="1" class="sidebar-header-items__title" role="heading">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="quick_start.html">
                        Quick Start
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="developer_guide.html">
                        Developer Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cpp_api.html">
                        C++ API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="pylibraft_api.html">
                        Python API
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button aria-expanded="false" aria-haspopup="true" class="btn dropdown-toggle nav-item" data-bs-toggle="dropdown" type="button">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="raft_dask_api.html">
                        RAFT Dask API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="using_comms.html">
                        Using RAFT Comms
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="using_libraft.html">
                        Using The Pre-Compiled Binary
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="contributing.html">
                        Contributing
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul aria-label="Icon Links" class="navbar-icon-links navbar-nav">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a class="nav-link" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/rapidsai/raft" rel="noopener" target="_blank" title="GitHub"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a class="nav-link" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/rapidsai" rel="noopener" target="_blank" title="Twitter"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main class="bd-main" id="main-content">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul aria-label="Breadcrumb" class="bd-breadcrumbs" role="navigation">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a aria-label="Home" class="nav-link" href="index.html">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li aria-current="page" class="breadcrumb-item active">Installation</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h1>
<section id="conda">
<h2>Conda<a class="headerlink" href="#conda" title="Permalink to this heading">#</a></h2>
<p>The easiest way to install RAFT is through conda and several packages are provided.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">libraft-headers</span></code> RAFT headers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libraft</span></code> (optional) shared library containing pre-compiled template specializations and runtime API.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pylibraft</span></code> (optional) Python wrappers around RAFT algorithms and primitives.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raft-dask</span></code> (optional) enables deployment of multi-node multi-GPU algorithms that use RAFT <code class="docutils literal notranslate"><span class="pre">raft::comms</span></code> in Dask clusters.</p></li>
</ul>
<p>Use the following command to install all of the RAFT packages with conda (replace <code class="docutils literal notranslate"><span class="pre">rapidsai</span></code> with <code class="docutils literal notranslate"><span class="pre">rapidsai-nightly</span></code> to install more up-to-date but less stable nightly packages). <code class="docutils literal notranslate"><span class="pre">mamba</span></code> is preferred over the <code class="docutils literal notranslate"><span class="pre">conda</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mamba<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>rapidsai<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>-c<span class="w"> </span>nvidia<span class="w"> </span>raft-dask<span class="w"> </span>pylibraft
</pre></div>
</div>
<p>You can also install the conda packages individually using the <code class="docutils literal notranslate"><span class="pre">mamba</span></code> command above.</p>
<p>After installing RAFT, <code class="docutils literal notranslate"><span class="pre">find_package(raft</span> <span class="pre">COMPONENTS</span> <span class="pre">nn</span> <span class="pre">distance)</span></code> can be used in your CUDA/C++ cmake build to compile and/or link against needed dependencies in your raft target. <code class="docutils literal notranslate"><span class="pre">COMPONENTS</span></code> are optional and will depend on the packages installed.</p>
</section>
<section id="pip">
<h2>Pip<a class="headerlink" href="#pip" title="Permalink to this heading">#</a></h2>
<p>pylibraft and raft-dask both have experimental packages that can be <a class="reference external" href="https://rapids.ai/pip.html#install">installed through pip</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pylibraft-cu11<span class="w"> </span>--extra-index-url<span class="o">=</span>https://pypi.ngc.nvidia.com
pip<span class="w"> </span>install<span class="w"> </span>raft-dask-cu11<span class="w"> </span>--extra-index-url<span class="o">=</span>https://pypi.ngc.nvidia.com
</pre></div>
</div>
</section>
<section id="building-and-installing-raft">
<h2>Building and installing RAFT<a class="headerlink" href="#building-and-installing-raft" title="Permalink to this heading">#</a></h2>
<section id="cuda-gpu-requirements">
<h3>CUDA/GPU Requirements<a class="headerlink" href="#cuda-gpu-requirements" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>cmake 3.23.1+</p></li>
<li><p>GCC 9.3+ (9.5.0+ recommended)</p></li>
<li><p>CUDA Toolkit 11.2+</p></li>
<li><p>NVIDIA driver 450.80.02+</p></li>
<li><p>Pascal architecture or better (compute capability &gt;= 6.0)</p></li>
</ul>
</section>
<section id="build-dependencies">
<h3>Build Dependencies<a class="headerlink" href="#build-dependencies" title="Permalink to this heading">#</a></h3>
<p>In addition to the libraries included with cudatoolkit 11.0+, there are some other dependencies below for building RAFT from source. Many of the dependencies are optional and depend only on the primitives being used. All of these can be installed with cmake or <a class="reference external" href="https://github.com/rapidsai/rapids-cmake#cpm">rapids-cpm</a> and many of them can be installed with <a class="reference external" href="https://anaconda.org">conda</a>.</p>
<section id="required">
<h4>Required<a class="headerlink" href="#required" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/rapidsai/rmm">RMM</a> corresponding to RAFT version.</p></li>
<li><p><a class="reference external" href="https://github.com/NVIDIA/thrust">Thrust</a> v1.17 / <a class="reference external" href="https://github.com/NVIDIA/cub">CUB</a></p></li>
<li><p><a class="reference external" href="https://github.com/NVIDIA/cuCollections">cuCollections</a> - Used in <code class="docutils literal notranslate"><span class="pre">raft::sparse::distance</span></code> API.</p></li>
<li><p><a class="reference external" href="https://github.com/NVIDIA/cutlass">CUTLASS</a>  v2.9.1 - Used in <code class="docutils literal notranslate"><span class="pre">raft::distance</span></code> API.</p></li>
</ul>
</section>
<section id="optional">
<h4>Optional<a class="headerlink" href="#optional" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/NVIDIA/nccl">NCCL</a> - Used in <code class="docutils literal notranslate"><span class="pre">raft::comms</span></code> API and needed to build <code class="docutils literal notranslate"><span class="pre">raft-dask</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/openucx/ucx">UCX</a> - Used in <code class="docutils literal notranslate"><span class="pre">raft::comms</span></code> API and needed to build <code class="docutils literal notranslate"><span class="pre">raft-dask</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/google/googletest">Googletest</a> - Needed to build tests</p></li>
<li><p><a class="reference external" href="https://github.com/google/benchmark">Googlebench</a> - Needed to build benchmarks</p></li>
<li><p><a class="reference external" href="https://github.com/doxygen/doxygen">Doxygen</a> - Needed to build docs</p></li>
</ul>
<p>All of RAFT&rsquo;s C++ APIs can be used header-only but pre-compiled shared libraries also contain some host-accessible APIs and template instantiations to accelerate compile times.</p>
<p>The recommended way to build and install RAFT is to use the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script in the root of the repository. This script can build both the C++ and Python artifacts and provides options for building and installing the headers, tests, benchmarks, and individual shared libraries.</p>
</section>
</section>
<section id="header-only-c">
<h3>Header-only C++<a class="headerlink" href="#header-only-c" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">build.sh</span></code> uses <a class="reference external" href="https://github.com/rapidsai/rapids-cmake">rapids-cmake</a>, which will automatically download any dependencies which are not already installed. It&rsquo;s important to note that while all the headers will be installed and available, some parts of the RAFT API depend on libraries like CUTLASS, which will need to be explicitly enabled in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>.</p>
<p>The following example will download the needed dependencies and install the RAFT headers into <code class="docutils literal notranslate"><span class="pre">$INSTALL_PREFIX/include/raft</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-n</span></code> flag can be passed to just have the build download the needed dependencies. Since RAFT is primarily used at build-time, the dependencies will never be installed by the RAFT build.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>-n
</pre></div>
</div>
<p>Once installed, <code class="docutils literal notranslate"><span class="pre">libraft</span></code> headers (and dependencies which were downloaded and installed using <code class="docutils literal notranslate"><span class="pre">rapids-cmake</span></code>) can be uninstalled also using <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>--uninstall
</pre></div>
</div>
</section>
<section id="c-shared-library-optional">
<h3>C++ Shared Library (optional)<a class="headerlink" href="#c-shared-library-optional" title="Permalink to this heading">#</a></h3>
<p>A shared library can be built for speeding up compile times. The shared library also contains a runtime API that allows you to invoke RAFT APIs directly from C++ source files (without <code class="docutils literal notranslate"><span class="pre">nvcc</span></code>). The shared library can also significantly improve re-compile times both while developing RAFT and using its APIs to develop applications. Pass the <code class="docutils literal notranslate"><span class="pre">--compile-lib</span></code> flag to <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> to build the library:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>--compile-lib
</pre></div>
</div>
<p>In above example the shared library is installed by default into <code class="docutils literal notranslate"><span class="pre">$INSTALL_PREFIX/lib</span></code>. To disable this, pass <code class="docutils literal notranslate"><span class="pre">-n</span></code> flag.</p>
<p>Once installed, the shared library, headers (and any dependencies downloaded and installed via <code class="docutils literal notranslate"><span class="pre">rapids-cmake</span></code>) can be uninstalled using <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>--uninstall
</pre></div>
</div>
</section>
<section id="ccache-and-sccache">
<h3>ccache and sccache<a class="headerlink" href="#ccache-and-sccache" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ccache</span></code> and <code class="docutils literal notranslate"><span class="pre">sccache</span></code> can be used to better cache parts of the build when rebuilding frequently, such as when working on a new feature. You can also use <code class="docutils literal notranslate"><span class="pre">ccache</span></code> or <code class="docutils literal notranslate"><span class="pre">sccache</span></code> with <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>--cache-tool<span class="o">=</span>ccache
</pre></div>
</div>
</section>
<section id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this heading">#</a></h3>
<p>Compile the tests using the <code class="docutils literal notranslate"><span class="pre">tests</span></code> target in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>tests
</pre></div>
</div>
<p>Test compile times can be improved significantly by using the optional shared libraries. If installed, they will be used automatically when building the tests but <code class="docutils literal notranslate"><span class="pre">--compile-libs</span></code> can be used to add additional compilation units and compile them with the tests.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>tests<span class="w"> </span>--compile-lib
</pre></div>
</div>
<p>The tests are broken apart by algorithm category, so you will find several binaries in <code class="docutils literal notranslate"><span class="pre">cpp/build/</span></code> named <code class="docutils literal notranslate"><span class="pre">*_TEST</span></code>.</p>
<p>For example, to run the distance tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./cpp/build/DISTANCE_TEST
</pre></div>
</div>
<p>It can take sometime to compile all of the tests. You can build individual tests by providing a semicolon-separated list to the <code class="docutils literal notranslate"><span class="pre">--limit-tests</span></code> option in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>tests<span class="w"> </span>-n<span class="w"> </span>--limit-tests<span class="o">=</span>NEIGHBORS_TEST<span class="p">;</span>DISTANCE_TEST<span class="p">;</span>MATRIX_TEST
</pre></div>
</div>
</section>
<section id="benchmarks">
<h3>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this heading">#</a></h3>
<p>The benchmarks are broken apart by algorithm category, so you will find several binaries in <code class="docutils literal notranslate"><span class="pre">cpp/build/</span></code> named <code class="docutils literal notranslate"><span class="pre">*_BENCH</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>bench
</pre></div>
</div>
<p>It can take sometime to compile all of the benchmarks. You can build individual benchmarks by providing a semicolon-separated list to the <code class="docutils literal notranslate"><span class="pre">--limit-bench</span></code> option in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>bench<span class="w"> </span>-n<span class="w"> </span>--limit-bench<span class="o">=</span>NEIGHBORS_BENCH<span class="p">;</span>DISTANCE_BENCH<span class="p">;</span>LINALG_BENCH
</pre></div>
</div>
</section>
<section id="c-using-cmake-directly">
<h3>C++ Using Cmake Directly<a class="headerlink" href="#c-using-cmake-directly" title="Permalink to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> to install RAFT into a specific location. The snippet below will install it into the current conda environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>cpp
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>-D<span class="w"> </span><span class="nv">BUILD_TESTS</span><span class="o">=</span>ON<span class="w"> </span>-DRAFT_COMPILE_LIBRARY<span class="o">=</span>ON<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$CONDA_PREFIX</span><span class="w"> </span>../
make<span class="w"> </span>-j&lt;parallel_level&gt;<span class="w"> </span>install
</pre></div>
</div>
<p>RAFT&rsquo;s cmake has the following configurable flags available:.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Flag</th>
<th>Possible Values</th>
<th>Default Value</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>BUILD_TESTS</td>
<td>ON, OFF</td>
<td>ON</td>
<td>Compile Googletests</td>
</tr>
<tr>
<td>BUILD_BENCH</td>
<td>ON, OFF</td>
<td>OFF</td>
<td>Compile benchmarks</td>
</tr>
<tr>
<td>raft_FIND_COMPONENTS</td>
<td>compiled distributed</td>
<td></td>
<td>Configures the optional components as a space-separated list</td>
</tr>
<tr>
<td>RAFT_COMPILE_LIBRARY</td>
<td>ON, OFF</td>
<td>ON if either BUILD_TESTS or BUILD_BENCH is ON; otherwise OFF</td>
<td>Compiles all <code>libraft</code> shared libraries (these are required for Googletests)</td>
</tr>
<tr>
<td>DETECT_CONDA_ENV</td>
<td>ON, OFF</td>
<td>ON</td>
<td>Enable detection of conda environment for dependencies</td>
</tr>
<tr>
<td>RAFT_NVTX</td>
<td>ON, OFF</td>
<td>OFF</td>
<td>Enable NVTX Markers</td>
</tr>
<tr>
<td>CUDA_ENABLE_KERNELINFO</td>
<td>ON, OFF</td>
<td>OFF</td>
<td>Enables <code>kernelinfo</code> in nvcc. This is useful for <code>compute-sanitizer</code></td>
</tr>
<tr>
<td>CUDA_ENABLE_LINEINFO</td>
<td>ON, OFF</td>
<td>OFF</td>
<td>Enable the -lineinfo option for nvcc</td>
</tr>
<tr>
<td>CUDA_STATIC_RUNTIME</td>
<td>ON, OFF</td>
<td>OFF</td>
<td>Statically link the CUDA runtime</td>
</tr>
</tbody>
</table><p>Currently, shared libraries are provided for the <code class="docutils literal notranslate"><span class="pre">libraft-nn</span></code> and <code class="docutils literal notranslate"><span class="pre">libraft-distance</span></code> components.</p>
</section>
<section id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this heading">#</a></h3>
<p>Conda environment scripts are provided for installing the necessary dependencies for building and using the Python APIs. It is preferred to use <code class="docutils literal notranslate"><span class="pre">mamba</span></code>, as it provides significant speedup over <code class="docutils literal notranslate"><span class="pre">conda</span></code>. In addition you will have to manually install <code class="docutils literal notranslate"><span class="pre">nvcc</span></code> as it will not be installed as part of the conda environment. The following example will install create and install dependencies for a CUDA 11.8 conda environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mamba<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>raft_env_name<span class="w"> </span>-f<span class="w"> </span>conda/environments/all_cuda-118_arch-x86_64.yaml
mamba<span class="w"> </span>activate<span class="w"> </span>raft_env_name
</pre></div>
</div>
<p>The Python APIs can be built and installed using the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># to build pylibraft</span>
./build.sh<span class="w"> </span>libraft<span class="w"> </span>pylibraft<span class="w"> </span>--compile-lib
<span class="c1"># to build raft-dask</span>
./build.sh<span class="w"> </span>libraft<span class="w"> </span>pylibraft<span class="w"> </span>raft-dask<span class="w"> </span>--compile-lib
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> can also be used to build the Python APIs manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">python</span><span class="o">/</span><span class="n">raft</span><span class="o">-</span><span class="n">dask</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">inplace</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>

<span class="n">cd</span> <span class="n">python</span><span class="o">/</span><span class="n">pylibraft</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">inplace</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>To run the Python tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>python/raft-dask
py.test<span class="w"> </span>-s<span class="w"> </span>-v

<span class="nb">cd</span><span class="w"> </span>python/pylibraft
py.test<span class="w"> </span>-s<span class="w"> </span>-v
</pre></div>
</div>
<p>The Python packages can also be uninstalled using the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>pylibraft<span class="w"> </span>raft-dask<span class="w"> </span>--uninstall
</pre></div>
</div>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">#</a></h3>
<p>The documentation requires that the C++ headers and python packages have been built and installed.</p>
<p>The following will build the docs along with the C++ and Python packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build</span><span class="o">.</span><span class="n">sh</span> <span class="n">libraft</span> <span class="n">pylibraft</span> <span class="n">raft</span><span class="o">-</span><span class="n">dask</span> <span class="n">docs</span> <span class="o">--</span><span class="nb">compile</span><span class="o">-</span><span class="n">lib</span>
</pre></div>
</div>
</section>
</section>
<section id="using-raft-in-downstream-projects">
<h2>Using RAFT in downstream projects<a class="headerlink" href="#using-raft-in-downstream-projects" title="Permalink to this heading">#</a></h2>
<p>There are a few different strategies for including RAFT in downstream projects, depending on whether the <a class="reference external" href="#build-dependencies">required build dependencies</a> have already been installed and are available on the <code class="docutils literal notranslate"><span class="pre">lib</span></code> and <code class="docutils literal notranslate"><span class="pre">include</span></code> paths.</p>
<p>Using cmake, you can enable CUDA support right in your project&rsquo;s declaration:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">YOUR_PROJECT</span><span class="w"> </span><span class="s">VERSION</span><span class="w"> </span><span class="s">0.1</span><span class="w"> </span><span class="s">LANGUAGES</span><span class="w"> </span><span class="s">CXX</span><span class="w"> </span><span class="s">CUDA</span><span class="p">)</span>
</pre></div>
</div>
<p>Please note that some additional compiler flags might need to be added when building against RAFT. For example, if you see an error like this <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">experimental</span> <span class="pre">flag</span> <span class="pre">'--expt-relaxed-constexpr'</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">allow</span> <span class="pre">this.</span></code>. The necessary flags can be set with cmake:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_compile_options</span><span class="p">(</span><span class="s">your_target_name</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="o">$&lt;</span><span class="nv">$&lt;COMPILE_LANGUAGE:CUDA</span><span class="o">&gt;</span><span class="s">:--expt-extended-lambda</span><span class="w"> </span><span class="s">--expt-relaxed-constexpr&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Further, it&rsquo;s important that the language level be set to at least C++ 17. This can be done with cmake:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set_target_properties</span><span class="p">(</span><span class="s">your_target_name</span>
<span class="s">PROPERTIES</span><span class="w"> </span><span class="s">CXX_STANDARD</span><span class="w">                        </span><span class="s">17</span>
<span class="w">           </span><span class="s">CXX_STANDARD_REQUIRED</span><span class="w">               </span><span class="s">ON</span>
<span class="w">           </span><span class="s">CUDA_STANDARD</span><span class="w">                       </span><span class="s">17</span>
<span class="w">           </span><span class="s">CUDA_STANDARD_REQUIRED</span><span class="w">              </span><span class="s">ON</span>
<span class="w">           </span><span class="s">POSITION_INDEPENDENT_CODE</span><span class="w">           </span><span class="s">ON</span>
<span class="w">           </span><span class="s">INTERFACE_POSITION_INDEPENDENT_CODE</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
</pre></div>
</div>
<section id="c-header-only-integration-without-cmake">
<h3>C++ header-only integration (without cmake)<a class="headerlink" href="#c-header-only-integration-without-cmake" title="Permalink to this heading">#</a></h3>
<p>While not a highly suggested method for building against RAFT, when all of the needed <a class="reference external" href="#build-dependencies">build dependencies</a> are already satisfied, RAFT can be integrated into downstream projects by cloning the repository and adding <code class="docutils literal notranslate"><span class="pre">cpp/include</span></code> from RAFT to the include path:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">RAFT_GIT_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/raft</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">STRING</span><span class="w"> </span><span class="s2">"Path to RAFT repo"</span><span class="p">)</span>
<span class="nb">ExternalProject_Add</span><span class="p">(</span><span class="s">raft</span>
<span class="w">  </span><span class="s">GIT_REPOSITORY</span><span class="w">    </span><span class="s">git@github.com:rapidsai/raft.git</span>
<span class="w">  </span><span class="s">GIT_TAG</span><span class="w">           </span><span class="s">branch-23.04</span>
<span class="w">  </span><span class="s">PREFIX</span><span class="w">            </span><span class="o">${</span><span class="nv">RAFT_GIT_DIR</span><span class="o">}</span>
<span class="w">  </span><span class="s">CONFIGURE_COMMAND</span><span class="w"> </span><span class="s2">""</span>
<span class="w">  </span><span class="s">BUILD_COMMAND</span><span class="w">     </span><span class="s2">""</span>
<span class="w">  </span><span class="s">INSTALL_COMMAND</span><span class="w">   </span><span class="s2">""</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">RAFT_INCLUDE_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">RAFT_GIT_DIR</span><span class="o">}</span><span class="s">/raft/cpp/include</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">STRING</span><span class="w"> </span><span class="s2">"RAFT include variable"</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="c-header-only-integration-with-cmake">
<h3>C++ header-only integration (with cmake)<a class="headerlink" href="#c-header-only-integration-with-cmake" title="Permalink to this heading">#</a></h3>
<p>When using cmake, you can install RAFT headers into your environment with <code class="docutils literal notranslate"><span class="pre">./build.sh</span> <span class="pre">libraft</span></code>.</p>
<p>If the RAFT headers have already been installed into your environment with cmake or through conda, such as by using the <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> script, use <code class="docutils literal notranslate"><span class="pre">find_package(raft)</span></code> and the <code class="docutils literal notranslate"><span class="pre">raft::raft</span></code> target.</p>
</section>
<section id="using-c-pre-compiled-shared-libraries">
<h3>Using C++ pre-compiled shared libraries<a class="headerlink" href="#using-c-pre-compiled-shared-libraries" title="Permalink to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">find_package(raft</span> <span class="pre">COMPONENTS</span> <span class="pre">compiled</span> <span class="pre">distributed)</span></code> to enable the shared library and transitively pass dependencies through separate targets for each component. In this example, the <code class="docutils literal notranslate"><span class="pre">raft::compiled</span></code> and <code class="docutils literal notranslate"><span class="pre">raft::distributed</span></code> targets will be available for configuring linking paths in addition to <code class="docutils literal notranslate"><span class="pre">raft::raft</span></code>. These targets will also pass through any transitive dependencies (such as NCCL for the <code class="docutils literal notranslate"><span class="pre">distributed</span></code> component).</p>
<p>The pre-compiled libraries contain template specializations for commonly used types, such as single- and double-precision floating-point. In order to use the symbols in the pre-compiled libraries, the compiler needs to be told not to instantiate templates that are already contained in the shared libraries. By convention, these header files are named <code class="docutils literal notranslate"><span class="pre">specializations.cuh</span></code> and located in the base directory for the packages that contain specializations.</p>
<p>The following example tells the compiler to ignore the pre-compiled templates for the <code class="docutils literal notranslate"><span class="pre">raft::distance</span></code> API so any symbols already compiled into the <code class="docutils literal notranslate"><span class="pre">libraft</span></code> shared library will be used instead. RAFT&rsquo;s cmake creates a variable <code class="docutils literal notranslate"><span class="pre">RAFT_COMPILED</span></code> which can be used to ignore the pre-compiled template specializations only when the shared library has been enabled through cmake (such as by specifying the <code class="docutils literal notranslate"><span class="pre">compiled</span></code> component in <code class="docutils literal notranslate"><span class="pre">find_package</span></code>):</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef RAFT_COMPILED</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;raft/distance/distance.cuh&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;raft/distance/specializations.cuh&gt;</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</section>
<section id="building-raft-c-from-source-in-cmake">
<h3>Building RAFT C++ from source in cmake<a class="headerlink" href="#building-raft-c-from-source-in-cmake" title="Permalink to this heading">#</a></h3>
<p>RAFT uses the <a class="reference external" href="https://github.com/rapidsai/rapids-cmake">RAPIDS-CMake</a> library so it can be more easily included into downstream projects. RAPIDS cmake provides a convenience layer around the <a class="reference external" href="https://github.com/cpm-cmake/CPM.cmake">CMake Package Manager (CPM)</a>.</p>
<p>The following example is similar to invoking <code class="docutils literal notranslate"><span class="pre">find_package(raft)</span></code> but uses <code class="docutils literal notranslate"><span class="pre">rapids_cpm_find</span></code>, which provides a richer and more flexible configuration landscape by using CPM to fetch any dependencies not already available to the build. The <code class="docutils literal notranslate"><span class="pre">raft::raft</span></code> link target will be made available and it&rsquo;s recommended that it be used as a <code class="docutils literal notranslate"><span class="pre">PRIVATE</span></code> link dependency in downstream projects. The <code class="docutils literal notranslate"><span class="pre">COMPILE_LIBRARY</span></code> option enables the building the shared libraries.</p>
<p>The following <code class="docutils literal notranslate"><span class="pre">cmake</span></code> snippet enables a flexible configuration of RAFT:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">RAFT_VERSION</span><span class="w"> </span><span class="s2">"23.04"</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">RAFT_FORK</span><span class="w"> </span><span class="s2">"rapidsai"</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">RAFT_PINNED_TAG</span><span class="w"> </span><span class="s2">"branch-${RAFT_VERSION}"</span><span class="p">)</span>

<span class="nb">function</span><span class="p">(</span><span class="s">find_and_configure_raft</span><span class="p">)</span>
<span class="w">  </span><span class="nb">set</span><span class="p">(</span><span class="s">oneValueArgs</span><span class="w"> </span><span class="s">VERSION</span><span class="w"> </span><span class="s">FORK</span><span class="w"> </span><span class="s">PINNED_TAG</span><span class="w"> </span><span class="s">COMPILE_LIBRARY</span><span class="p">)</span>
<span class="w">  </span><span class="nb">cmake_parse_arguments</span><span class="p">(</span><span class="s">PKG</span><span class="w"> </span><span class="s2">"${options}"</span><span class="w"> </span><span class="s2">"${oneValueArgs}"</span>
<span class="w">                            </span><span class="s2">"${multiValueArgs}"</span><span class="w"> </span><span class="o">${</span><span class="nv">ARGN</span><span class="o">}</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span>
<span class="w">  </span><span class="c">#-----------------------------------------------------</span>
<span class="w">  </span><span class="c"># Invoke CPM find_package()</span>
<span class="w">  </span><span class="c">#-----------------------------------------------------</span>

<span class="w">  </span><span class="nb">rapids_cpm_find</span><span class="p">(</span><span class="s">raft</span><span class="w"> </span><span class="o">${</span><span class="nv">PKG_VERSION</span><span class="o">}</span>
<span class="w">          </span><span class="s">GLOBAL_TARGETS</span><span class="w">      </span><span class="s">raft::raft</span>
<span class="w">          </span><span class="s">BUILD_EXPORT_SET</span><span class="w">    </span><span class="s">projname-exports</span>
<span class="w">          </span><span class="s">INSTALL_EXPORT_SET</span><span class="w">  </span><span class="s">projname-exports</span>
<span class="w">          </span><span class="s">CPM_ARGS</span>
<span class="w">          </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/</span><span class="o">${</span><span class="nv">PKG_FORK</span><span class="o">}</span><span class="s">/raft.git</span>
<span class="w">          </span><span class="s">GIT_TAG</span><span class="w">        </span><span class="o">${</span><span class="nv">PKG_PINNED_TAG</span><span class="o">}</span>
<span class="w">          </span><span class="s">SOURCE_SUBDIR</span><span class="w">  </span><span class="s">cpp</span>
<span class="w">          </span><span class="s">FIND_PACKAGE_ARGUMENTS</span><span class="w"> </span><span class="s2">"COMPONENTS compiled distributed"</span>
<span class="w">          </span><span class="s">OPTIONS</span>
<span class="w">          </span><span class="s2">"BUILD_TESTS OFF"</span>
<span class="w">          </span><span class="s2">"BUILD_BENCH OFF"</span>
<span class="w">          </span><span class="s2">"RAFT_COMPILE_LIBRARY ${PKG_COMPILE_LIBRARY}"</span>
<span class="w">  </span><span class="p">)</span>

<span class="nb">endfunction</span><span class="p">()</span>

<span class="c"># Change pinned tag here to test a commit in CI</span>
<span class="c"># To use a different RAFT locally, set the CMake variable</span>
<span class="c"># CPM_raft_SOURCE=/path/to/local/raft</span>
<span class="nb">find_and_configure_raft</span><span class="p">(</span><span class="s">VERSION</span><span class="w">    </span><span class="o">${</span><span class="nv">RAFT_VERSION</span><span class="o">}</span><span class="s">.00</span>
<span class="w">        </span><span class="s">FORK</span><span class="w">             </span><span class="o">${</span><span class="nv">RAFT_FORK</span><span class="o">}</span>
<span class="w">        </span><span class="s">PINNED_TAG</span><span class="w">       </span><span class="o">${</span><span class="nv">RAFT_PINNED_TAG</span><span class="o">}</span>
<span class="w">        </span><span class="s">COMPILE_LIBRARY</span><span class="w">          </span><span class="s">NO</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can find a fully-functioning <a class="reference external" href="../../cpp/template/README">example template project</a> in the <code class="docutils literal notranslate"><span class="pre">cpp/template</span></code> directory, which provides everything you need to build a new application with RAFT or incorporate RAFT Into your existing libraries.</p>
</section>
</section>
<section id="uninstall">
<h2>Uninstall<a class="headerlink" href="#uninstall" title="Permalink to this heading">#</a></h2>
<p>Once built and installed, RAFT can be safely uninstalled using <code class="docutils literal notranslate"><span class="pre">build.sh</span></code> by specifying any or all of the installed components. Please note that since <code class="docutils literal notranslate"><span class="pre">pylibraft</span></code> depends on <code class="docutils literal notranslate"><span class="pre">libraft</span></code>, uninstalling <code class="docutils literal notranslate"><span class="pre">pylibraft</span></code> will also uninstall <code class="docutils literal notranslate"><span class="pre">libraft</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>libraft<span class="w"> </span>pylibraft<span class="w"> </span>raft-dask<span class="w"> </span>--uninstall
</pre></div>
</div>
<p>Leaving off the installed components will uninstall everything that&rsquo;s been installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./build.sh<span class="w"> </span>--uninstall
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev" href="quick_start.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Quick Start</p>
      </div>
    </a>
    <a class="right-next" href="developer_guide.html" title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Developer Guide</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conda">Conda</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pip">Pip</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-and-installing-raft">Building and installing RAFT</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cuda-gpu-requirements">CUDA/GPU Requirements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-dependencies">Build Dependencies</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#required">Required</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#optional">Optional</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#header-only-c">Header-only C++</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-shared-library-optional">C++ Shared Library (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ccache-and-sccache">ccache and sccache</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tests">Tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#benchmarks">Benchmarks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-using-cmake-directly">C++ Using Cmake Directly</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python">Python</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#documentation">Documentation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-raft-in-downstream-projects">Using RAFT in downstream projects</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-header-only-integration-without-cmake">C++ header-only integration (without cmake)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-header-only-integration-with-cmake">C++ header-only integration (with cmake)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-c-pre-compiled-shared-libraries">Using C++ pre-compiled shared libraries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-raft-c-from-source-in-cmake">Building RAFT C++ from source in cmake</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uninstall">Uninstall</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/build.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner"></div>
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      &copy; Copyright 2023, NVIDIA Corporation.
      <br>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  
<script defer id="rapids-selector-js" src="/assets/js/custom.js"></script><script id="rapids-selector-pixel-invocation" type="text/javascript">_satellite.pageBottom();</script></body></html>