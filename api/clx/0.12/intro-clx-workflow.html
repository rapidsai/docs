<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
 <!--<![endif]-->
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   CLX Workflow — clx 0.12.0a documentation
  </title>
  <script src="_static/js/modernizr.min.js" type="text/javascript">
  </script>
  <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js" type="text/javascript">
  </script>
  <script src="_static/jquery.js" type="text/javascript">
  </script>
  <script src="_static/underscore.js" type="text/javascript">
  </script>
  <script src="_static/doctools.js" type="text/javascript">
  </script>
  <script src="_static/language_data.js" type="text/javascript">
  </script>
  <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js" type="text/javascript">
  </script>
  <script src="_static/js/theme.js" type="text/javascript">
  </script>
  <link href="_static/css/theme.css" rel="stylesheet" type="text/css"/>
  <link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
  <link href="_static/params.css" rel="stylesheet" type="text/css"/>
  <link href="genindex.html" rel="index" title="Index"/>
  <link href="search.html" rel="search" title="Search"/>
  <link href="intro-clx-dga.html" rel="next" title="CLX DGA Detection"/>
  <link href="10min-clx.html" rel="prev" title="10 minutes to CLX"/>
  <style id="rapids-selector-css">
   /* JTD custom theme for RAPIDS */
/* RAPIDS Color #7253ed */

/* body */
body {
  font-family: -apple-system, BlinkMacSystemFont, "helvetica neue", helvetica,
    roboto, noto, "segoe ui", arial, sans-serif;
  font-size: inherit;
  line-height: 1.4;
  color: #5c5962;
  background-color: #fff;
}

h1,
h2,
.rst-content .toctree-wrapper p.caption,
h3,
h4,
h5,
h6,
legend {
  font-family: -apple-system, BlinkMacSystemFont, "helvetica neue", helvetica,
    roboto, noto, "segoe ui", arial, sans-serif;
}

a {
  color: #7253ed;
  text-decoration: none;
  background-image: linear-gradient(#eeebee 0%, #eeebee 100%);
  background-repeat: repeat-x;
  background-position: 0 100%;
  background-size: 1px 1px;
}

a:hover {
  color: #7253ed;
  background-image: linear-gradient(
    rgba(114, 83, 237, 0.45) 0%,
    rgba(114, 83, 237, 0.45) 100%
  );
  background-size: 1px 1px;
}

a:visited {
  color: inherit;
}

.wy-menu-vertical a {
  color: #5d5962;
}

.wy-nav-content {
  max-width: 1000px;
}

/* side nav */
.wy-nav-content-wrap {
  background-color: #fcfcfc;
}

.wy-nav-side {
  border-right: 1px solid #eeebee;
  background-color: #f5f6fa;
}

.wy-side-nav-search {
  background-color: #f5f6fa;
}

.wy-side-nav-search input[type="text"] {
  border-radius: 0;
  border-color: #7253ed;
}

.wy-side-nav-search > a,
.wy-side-nav-search .wy-dropdown > a {
  color: #7253ed;
}

.wy-menu-vertical header,
.wy-menu-vertical p.caption {
  color: inherit;
}

.wy-menu-vertical header,
.wy-menu-vertical p.caption {
  color: #7253ed;
}

.wy-menu-vertical a:hover {
  background-color: #eaeaea;
}

.wy-side-nav-search > div.version {
  color: #5c5962;
}

/* breakout blocks */

.highlight {
  background-color: #f6f3ff;
}

.highlight .k {
  color: #920b60;
}

.highlight .nn {
  color: #7253ed;
}

.highlight .kk {
  color: #920b60;
}

.highlight .kn {
  color: #920b60;
}

.highlight .nb {
  color: #920b60;
}

.rst-content dl:not(.docutils) dt {
  background: #f1eeff;
  color: #491dc3;
  border-top: solid 3px #7253ed;
}

.rst-content pre.literal-block,
.rst-content div[class^="highlight"] {
  border: none;
}

.wy-alert.wy-alert-info .wy-alert-title,
.rst-content .note .wy-alert-title,
.rst-content .wy-alert-info.attention .wy-alert-title,
.rst-content .wy-alert-info.caution .wy-alert-title,
.rst-content .wy-alert-info.danger .wy-alert-title,
.rst-content .wy-alert-info.error .wy-alert-title,
.rst-content .wy-alert-info.hint .wy-alert-title,
.rst-content .wy-alert-info.important .wy-alert-title,
.rst-content .wy-alert-info.tip .wy-alert-title,
.rst-content .wy-alert-info.warning .wy-alert-title,
.rst-content .seealso .wy-alert-title,
.rst-content .wy-alert-info.admonition-todo .wy-alert-title,
.rst-content .wy-alert-info.admonition .wy-alert-title,
.wy-alert.wy-alert-info .rst-content .admonition-title,
.rst-content .wy-alert.wy-alert-info .admonition-title,
.rst-content .note .admonition-title,
.rst-content .wy-alert-info.attention .admonition-title,
.rst-content .wy-alert-info.caution .admonition-title,
.rst-content .wy-alert-info.danger .admonition-title,
.rst-content .wy-alert-info.error .admonition-title,
.rst-content .wy-alert-info.hint .admonition-title,
.rst-content .wy-alert-info.important .admonition-title,
.rst-content .wy-alert-info.tip .admonition-title,
.rst-content .wy-alert-info.warning .admonition-title,
.rst-content .seealso .admonition-title,
.rst-content .wy-alert-info.admonition-todo .admonition-title,
.rst-content .wy-alert-info.admonition .admonition-title {
  background-color: #7253ec;
}

.wy-alert.wy-alert-info,
.rst-content .note,
.rst-content .wy-alert-info.attention,
.rst-content .wy-alert-info.caution,
.rst-content .wy-alert-info.danger,
.rst-content .wy-alert-info.error,
.rst-content .wy-alert-info.hint,
.rst-content .wy-alert-info.important,
.rst-content .wy-alert-info.tip,
.rst-content .wy-alert-info.warning,
.rst-content .seealso,
.rst-content .wy-alert-info.admonition-todo,
.rst-content .wy-alert-info.admonition {
  background: #f1edff;
}

/* Selector CSS starts here */

.rapids-home-container__home-btn {
  position: relative;
  display: block;
  padding: 10px 0;
}

.rapids-home-container__home-btn::before {
  font-family: "FontAwesome";
  content: "\f015";
  font-weight: 400;
}

.rapids-selector__container {
  position: relative;
}

#rapids-sphinx-container {
  margin: 0 0 34px;
}

.rapids-selector__container,
.rapids-home-container {
  margin: 0 auto;
  text-align: center;
}

@media (min-width: 768px) {
  #rapids-doxygen-container .rapids-home-container,
  #rapids-doxygen-container .rapids-selector__container {
    display: inline-block;
    margin: 0 0 0 40px;
  }
}

.rapids-selector__container * {
  box-sizing: border-box;
}

.rapids-home-container__home-btn,
.rapids-home-container__home-btn:visited,
.rapids-home-container__home-btn:hover,
.rapids-selector__selected {
  color: #7253ed;
  font-size: 28px;
  font-weight: 700;
  text-decoration: none;
  background-image: linear-gradient(#eeebee 0%, #eeebee 100%);
  background-repeat: repeat-x;
  background-position: 0 100%;
  background-size: 1px 1px;
}

.rapids-selector__selected:hover,
.rapids-home-container__home-btn:hover {
  background-image: linear-gradient(
    rgba(114, 83, 237, 0.45) 0%,
    rgba(114, 83, 237, 0.45) 100%
  );
  background-size: 1px 1px;
}

.rapids-selector__selected {
  cursor: pointer;
  padding: 10px 8px;
}

.rapids-selector__selected::after {
  content: "\f0d7";
  font-family: "FontAwesome";
  position: absolute;
  transition: all 250ms ease-in-out;
  transform: rotate(180deg);
}

.rapids-selector--hidden .rapids-selector__selected::after {
  transform: rotate(0);
}

#rapids-doxygen-container .rapids-selector__selected::after {
  margin-left: 5px;
}

#rapids-sphinx-container .rapids-selector__selected::after {
  right: 0;
}

.rapids-selector__menu {
  position: absolute;
  z-index: 10000; /* keep above 9999 for doxygen compatibility */
  background-color: #f5f6fa;
  min-width: 100%;
  left: 0;
  box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2),
    0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);
  overflow: hidden;
  transition: all 250ms ease-in-out;
}

.rapids-selector--hidden .rapids-selector__menu {
  height: 0 !important;
  visibility: hidden;
}

.rapids-selector__menu-item {
  display: block;
  padding: 5px 8px 5px;
  font-weight: 700;
  font-size: 20px;
}

a.rapids-selector__menu-item,
a.rapids-selector__menu-item:visited {
  color: #5c5962;
}

a.rapids-selector__menu-item:hover,
a.rapids-selector__menu-item--selected,
a.rapids-selector__menu-item--selected:visited {
  text-decoration: none;
  background-color: #7253ed;
  color: white;
}

a.rapids-selector__menu-item--selected {
  cursor: default;
}

.rapids-selector__menu-item:first-child {
  padding: 10px 0 5px;
}

.rapids-selector__menu-item:last-child {
  padding: 5px 0 10px;
}
  </style>
 </head>
 <body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
   <nav class="wy-nav-side" data-toggle="wy-nav-shift">
    <div class="wy-side-scroll">
     <div class="wy-side-nav-search">
      <div id="rapids-sphinx-container">
       <div class="rapids-home-container">
        <a class="rapids-home-container__home-btn" href="https://docs.rapids.ai/api">
         Home
        </a>
       </div>
       <div class="rapids-selector__container rapids-selector--hidden">
        <div class="rapids-selector__selected">
         clx
        </div>
        <div class="rapids-selector__menu">
         <a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/clx/stable/api.html">
          clx
         </a>
         <a class="rapids-selector__menu-item" href="/api/cudf/stable/api.html">
          cudf
         </a>
         <a class="rapids-selector__menu-item" href="/api/cugraph/stable/api.html">
          cugraph
         </a>
         <a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">
          cuml
         </a>
         <a class="rapids-selector__menu-item" href="/api/cusignal/nightly/api.html">
          cusignal
         </a>
         <a class="rapids-selector__menu-item" href="/api/cuspatial/nightly/api.html">
          cuspatial
         </a>
         <a class="rapids-selector__menu-item" href="/api/cuxfilter/nightly">
          cuxfilter
         </a>
         <a class="rapids-selector__menu-item" href="/api/libcudf/stable/namespacecudf.html">
          libcudf
         </a>
         <a class="rapids-selector__menu-item" href="/api/libnvstrings/stable/annotated.html">
          libnvstrings
         </a>
         <a class="rapids-selector__menu-item" href="/api/nvstrings/stable/api.html">
          nvstrings
         </a>
         <a class="rapids-selector__menu-item" href="/api/rmm/stable/annotated.html">
          rmm
         </a>
        </div>
       </div>
       <div class="rapids-selector__container rapids-selector--hidden">
        <div class="rapids-selector__selected">
         stable (0.12)
        </div>
        <div class="rapids-selector__menu">
         <a class="rapids-selector__menu-item" href="/api/clx/nightly/api.html">
          nightly (0.13)
         </a>
         <a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/clx/stable/api.html">
          stable (0.12)
         </a>
        </div>
       </div>
      </div>
      <div role="search">
       <form action="search.html" class="wy-form" id="rtd-search-form" method="get">
        <input name="q" placeholder="Search docs" type="text"/>
        <input name="check_keywords" type="hidden" value="yes"/>
        <input name="area" type="hidden" value="default"/>
       </form>
      </div>
     </div>
     <div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
      <p class="caption">
       <span class="caption-text">
        Contents:
       </span>
      </p>
      <ul class="current">
       <li class="toctree-l1">
        <a class="reference internal" href="api.html">
         API Reference
        </a>
       </li>
       <li class="toctree-l1">
        <a class="reference internal" href="10min-clx.html">
         10 minutes to CLX
        </a>
       </li>
       <li class="toctree-l1 current">
        <a class="current reference internal" href="#">
         CLX Workflow
        </a>
        <ul>
         <li class="toctree-l2">
          <a class="reference internal" href="#What-is-a-CLX-Workflow?">
           What is a CLX Workflow?
          </a>
         </li>
         <li class="toctree-l2">
          <a class="reference internal" href="#When-to-use-a-CLX-Workflow">
           When to use a CLX Workflow
          </a>
          <ul>
           <li class="toctree-l3">
            <a class="reference internal" href="#A-simple-example-of-a-custom-Workflow">
             A simple example of a custom Workflow
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l2">
          <a class="reference internal" href="#Workflow-I/O-Components">
           Workflow I/O Components
          </a>
          <ul>
           <li class="toctree-l3">
            <a class="reference internal" href="#Filesystem">
             Filesystem
            </a>
           </li>
           <li class="toctree-l3">
            <a class="reference internal" href="#Dask-Filesystem">
             Dask Filesystem
            </a>
           </li>
           <li class="toctree-l3">
            <a class="reference internal" href="#Kafka">
             Kafka
            </a>
           </li>
          </ul>
         </li>
         <li class="toctree-l2">
          <a class="reference internal" href="#Tying-it-together">
           Tying it together
          </a>
         </li>
         <li class="toctree-l2">
          <a class="reference internal" href="#Workflow-configurations-in-an-external-file">
           Workflow configurations in an external file
          </a>
         </li>
        </ul>
       </li>
       <li class="toctree-l1">
        <a class="reference internal" href="intro-clx-dga.html">
         CLX DGA Detection
        </a>
       </li>
      </ul>
     </div>
    </div>
   </nav>
   <section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
    <nav aria-label="top navigation" class="wy-nav-top">
     <i class="fa fa-bars" data-toggle="wy-nav-top">
     </i>
     <a href="index.html">
      clx
     </a>
    </nav>
    <div class="wy-nav-content">
     <div class="rst-content">
      <div aria-label="breadcrumbs navigation" role="navigation">
       <ul class="wy-breadcrumbs">
        <li>
         <a href="index.html">
          Docs
         </a>
         »
        </li>
        <li>
         CLX Workflow
        </li>
        <li class="wy-breadcrumbs-aside">
         <a href="_sources/intro-clx-workflow.ipynb.txt" rel="nofollow">
          View page source
         </a>
        </li>
       </ul>
       <hr/>
      </div>
      <div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
       <div itemprop="articleBody">
        <style>
         /* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
        </style>
        <div class="section" id="CLX-Workflow">
         <h1>
          CLX Workflow
          <a class="headerlink" href="#CLX-Workflow" title="Permalink to this headline">
           ¶
          </a>
         </h1>
         <p>
          This is an introduction to the CLX Workflow and it’s I/O components.
         </p>
         <div class="section" id="What-is-a-CLX-Workflow?">
          <h2>
           What is a CLX Workflow?
           <a class="headerlink" href="#What-is-a-CLX-Workflow?" title="Permalink to this headline">
            ¶
           </a>
          </h2>
          <p>
           A CLX Workflow receives data from a particular source, performs operations on that data within a GPU dataframe, and outputs that data to a particular destination. This guide will teach you how to configure your workflow inputs and outputs around a simple workflow example.
          </p>
         </div>
         <div class="section" id="When-to-use-a-CLX-Workflow">
          <h2>
           When to use a CLX Workflow
           <a class="headerlink" href="#When-to-use-a-CLX-Workflow" title="Permalink to this headline">
            ¶
           </a>
          </h2>
          <p>
           A CLX Workflow provides a simple and modular way of “plugging in” a particular workflow to a read from different inputs and outputs. Use a CLX Workflow when you would like to deploy a workflow as part of a data pipeline.
          </p>
          <div class="section" id="A-simple-example-of-a-custom-Workflow">
           <h3>
            A simple example of a custom Workflow
            <a class="headerlink" href="#A-simple-example-of-a-custom-Workflow" title="Permalink to this headline">
             ¶
            </a>
           </h3>
           <div class="nbinput nblast docutils container">
            <div class="prompt highlight-none notranslate">
             <div class="highlight">
              <pre><span></span>[8]:
</pre>
             </div>
            </div>
            <div class="input_area highlight-ipython3 notranslate">
             <div class="highlight">
              <pre>
<span></span><span class="kn">from</span> <span class="nn">clx.workflow.workflow</span> <span class="kn">import</span> <span class="n">Workflow</span>
<span class="k">class</span> <span class="nc">CustomWorkflow</span><span class="p">(</span><span class="n">Workflow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">):</span>
        <span class="n">dataframe</span><span class="p">[</span><span class="s2">"enriched"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"enriched output"</span>
        <span class="k">return</span> <span class="n">dataframe</span>
</pre>
             </div>
            </div>
           </div>
           <p>
            The Workflow relies on the Workflow class which handles the I/O and general data processing functionality. To implement a new Workflow, the developer need only implement the
            <code class="docutils literal notranslate">
             <span class="pre">
              workflow
             </span>
            </code>
            function which receives an input dataframe, as shown above.
           </p>
           <p>
            A more advanced example of a Worlflow can be found
            <a class="reference external" href="https://github.com/rapidsai/clx/blob/branch-0.12/clx/workflow/splunk_alert_workflow.py">
             here
            </a>
            . It is an example of a
            <a class="reference external" href="https://www.splunk.com/">
             Splunk
            </a>
            Alert Workflow used to find anamolies in Splunk alert data.
           </p>
          </div>
         </div>
         <div class="section" id="Workflow-I/O-Components">
          <h2>
           Workflow I/O Components
           <a class="headerlink" href="#Workflow-I/O-Components" title="Permalink to this headline">
            ¶
           </a>
          </h2>
          <p>
           In order to deploy a workflow to an input an output data feed, we integrate the CLX I/O components.
          </p>
          <p>
           Let’s look quickly at what a workflow configuration for the source and destination might look like. You can see below we declare each of the properties within a dictionary. For more information on how to declare configuration within a configurable yaml file [go].
          </p>
          <div class="nbinput nblast docutils container">
           <div class="prompt highlight-none notranslate">
            <div class="highlight">
             <pre><span></span>[4]:
</pre>
            </div>
           </div>
           <div class="input_area highlight-ipython3 notranslate">
            <div class="highlight">
             <pre>
<span></span><span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"fs"</span><span class="p">,</span>
   <span class="s2">"input_format"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
   <span class="s2">"input_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/input/data"</span><span class="p">,</span>
   <span class="s2">"schema"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"raw"</span><span class="p">],</span>
   <span class="s2">"delimiter"</span><span class="p">:</span> <span class="s2">","</span><span class="p">,</span>
   <span class="s2">"required_cols"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"raw"</span><span class="p">],</span>
   <span class="s2">"dtype"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"str"</span><span class="p">],</span>
   <span class="s2">"header"</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
<span class="n">destination</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"fs"</span><span class="p">,</span>
   <span class="s2">"output_format"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
   <span class="s2">"output_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/output/data"</span>
<span class="p">}</span>
</pre>
            </div>
           </div>
          </div>
          <p>
           The first step to configuring the input and output of a workflow is to determine the source and destination type. Then to set the associated parameters for that specific type. As seen above the
           <code class="docutils literal notranslate">
            <span class="pre">
             type
            </span>
           </code>
           property is listed first and can be one of the following.
          </p>
          <p>
           Source Types
          </p>
          <ul class="simple">
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               fs
              </span>
             </code>
             - Read from a local filesystem
            </p>
           </li>
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               dask_fs
              </span>
             </code>
             - Increase the speed of GPU workflow operations by reading from a file using Dask
            </p>
           </li>
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               kafka
              </span>
             </code>
             - Read from
             <a class="reference external" href="https://kafka.apache.org/">
              Kafka
             </a>
            </p>
           </li>
          </ul>
          <p>
           Destination Types
          </p>
          <ul class="simple">
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               fs
              </span>
             </code>
             - Writing to local filesystem
            </p>
           </li>
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               kafka
              </span>
             </code>
             - Write to
             <a class="reference external" href="https://kafka.apache.org/">
              Kafka
             </a>
            </p>
           </li>
          </ul>
          <div class="section" id="Filesystem">
           <h3>
            Filesystem
            <a class="headerlink" href="#Filesystem" title="Permalink to this headline">
             ¶
            </a>
           </h3>
           <p>
            If the
            <code class="docutils literal notranslate">
             <span class="pre">
              fs
             </span>
            </code>
            type is used, the developer must distinguish the data format using the
            <code class="docutils literal notranslate">
             <span class="pre">
              input_format
             </span>
            </code>
            attribute. Formats available are: csv, parquet, and orc.
           </p>
           <p>
            The associated parameters available for the
            <code class="docutils literal notranslate">
             <span class="pre">
              fs
             </span>
            </code>
            type and
            <code class="docutils literal notranslate">
             <span class="pre">
              input_format
             </span>
            </code>
            are documented within the
            <a class="reference external" href="https://rapidsai.github.io/projects/cudf/en/0.11.0/api.html#module-cudf.io.csv">
             cuDF I/O
            </a>
            API. For example for reading data from a csv file, reference
            <a class="reference external" href="https://rapidsai.github.io/projects/cudf/en/0.11.0/api.html#cudf.io.csv.read_csv">
             cudf.io.csv.read_csv
            </a>
            available parameters.
           </p>
           <p>
            Example
           </p>
           <div class="nbinput nblast docutils container">
            <div class="prompt highlight-none notranslate">
             <div class="highlight">
              <pre><span></span>[ ]:
</pre>
             </div>
            </div>
            <div class="input_area highlight-ipython3 notranslate">
             <div class="highlight">
              <pre>
<span></span><span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"fs"</span><span class="p">,</span>
   <span class="s2">"input_format"</span><span class="p">:</span> <span class="s2">"parquet"</span><span class="p">,</span>
   <span class="s2">"input_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/input/data"</span><span class="p">,</span>
   <span class="s2">"columns"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"x"</span><span class="p">]</span>
<span class="p">}</span>
</pre>
             </div>
            </div>
           </div>
          </div>
          <div class="section" id="Dask-Filesystem">
           <h3>
            Dask Filesystem
            <a class="headerlink" href="#Dask-Filesystem" title="Permalink to this headline">
             ¶
            </a>
           </h3>
           <p>
            If the
            <code class="docutils literal notranslate">
             <span class="pre">
              dask_fs
             </span>
            </code>
            type is used the developer must distinguish the data format using the
            <code class="docutils literal notranslate">
             <span class="pre">
              input_format
             </span>
            </code>
            attribute. Formats available are: csv, parquet, and orc.
           </p>
           <p>
            The associated parameters available for the
            <code class="docutils literal notranslate">
             <span class="pre">
              dask_fs
             </span>
            </code>
            type and
            <code class="docutils literal notranslate">
             <span class="pre">
              input_format
             </span>
            </code>
            are listed within the
            <a class="reference external" href="https://rapidsai.github.io/projects/cudf/en/0.11.0/10min.html#Getting-Data-In/Out">
             Dask cuDF
            </a>
            documentation.
           </p>
           <p>
            Example
           </p>
           <div class="nbinput nblast docutils container">
            <div class="prompt highlight-none notranslate">
             <div class="highlight">
              <pre><span></span>[ ]:
</pre>
             </div>
            </div>
            <div class="input_area highlight-ipython3 notranslate">
             <div class="highlight">
              <pre>
<span></span><span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"dask_fs"</span><span class="p">,</span>
   <span class="s2">"input_format"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
   <span class="s2">"input_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/input/data/*.csv"</span>
<span class="p">}</span>
</pre>
             </div>
            </div>
           </div>
          </div>
          <div class="section" id="Kafka">
           <h3>
            Kafka
            <a class="headerlink" href="#Kafka" title="Permalink to this headline">
             ¶
            </a>
           </h3>
           <p>
            If the
            <code class="docutils literal notranslate">
             <span class="pre">
              kafka
             </span>
            </code>
            type is used the following parameters must be indicated
           </p>
           <p>
            Source
           </p>
           <ul class="simple">
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                kafka_brokers
               </span>
              </code>
              - Kafka brokers
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                group_id
               </span>
              </code>
              - Group ID for consuming kafka messages
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                consumer_kafka_topics
               </span>
              </code>
              - Names of kafka topics to read from
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                batch_size
               </span>
              </code>
              - Indicates number of kafka messages to read before data is processed through the workflow
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                time_window
               </span>
              </code>
              - Maximum time window to wait for
              <code class="docutils literal notranslate">
               <span class="pre">
                batch_size
               </span>
              </code>
              to be reached before workflow processing begins.
             </p>
            </li>
           </ul>
           <p>
            Destination
           </p>
           <ul class="simple">
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                kafka_brokers
               </span>
              </code>
              - Kafka brokers
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                publisher_kafka_topic
               </span>
              </code>
              - Names of kafka topic to write data to
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                batch_size
               </span>
              </code>
              - Indicates number of workflow-processed messages to aggregate before data is written to the kafka topic
             </p>
            </li>
            <li>
             <p>
              <code class="docutils literal notranslate">
               <span class="pre">
                output_delimiter
               </span>
              </code>
              - Delimiter of the data columns
             </p>
            </li>
           </ul>
           <p>
            Example
           </p>
           <div class="nbinput nblast docutils container">
            <div class="prompt highlight-none notranslate">
             <div class="highlight">
              <pre><span></span>[ ]:
</pre>
             </div>
            </div>
            <div class="input_area highlight-ipython3 notranslate">
             <div class="highlight">
              <pre>
<span></span><span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"kafka"</span><span class="p">,</span>
    <span class="s2">"kafka_brokers"</span><span class="p">:</span> <span class="s2">"kafka:9092"</span><span class="p">,</span>
    <span class="s2">"group_id"</span><span class="p">:</span> <span class="s2">"cyber"</span><span class="p">,</span>
    <span class="s2">"batch_size"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">"consumer_kafka_topics"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"topic1"</span><span class="p">,</span> <span class="s2">"topic2"</span><span class="p">],</span>
    <span class="s2">"time_window"</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>
<span class="n">dest</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"kafka"</span><span class="p">,</span>
    <span class="s2">"kafka_brokers"</span><span class="p">:</span> <span class="s2">"kafka:9092"</span>
    <span class="s2">"batch_size"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">"publisher_kafka_topic"</span><span class="p">:</span> <span class="s2">"topic3"</span><span class="p">,</span>
    <span class="s2">"output_delimiter"</span><span class="p">:</span> <span class="s2">","</span>
<span class="p">}</span>
</pre>
             </div>
            </div>
           </div>
          </div>
         </div>
         <div class="section" id="Tying-it-together">
          <h2>
           Tying it together
           <a class="headerlink" href="#Tying-it-together" title="Permalink to this headline">
            ¶
           </a>
          </h2>
          <p>
           Once we have established our workflow and source and destination configurations we can now run our workflow. Let’s create a workflow using the
           <code class="docutils literal notranslate">
            <span class="pre">
             CustomWorkflow
            </span>
           </code>
           we created above.
          </p>
          <p>
           Firstly, we must know the parameters for instantiating a basic workflow
          </p>
          <ul class="simple">
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               name
              </span>
             </code>
             - The name of the workflow
            </p>
           </li>
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               source
              </span>
             </code>
             - The source of input data (optional)
            </p>
           </li>
           <li>
            <p>
             <code class="docutils literal notranslate">
              <span class="pre">
               destination
              </span>
             </code>
             - The destination for output data (optional)
            </p>
           </li>
          </ul>
          <div class="nbinput nblast docutils container">
           <div class="prompt highlight-none notranslate">
            <div class="highlight">
             <pre><span></span>[ ]:
</pre>
            </div>
           </div>
           <div class="input_area highlight-ipython3 notranslate">
            <div class="highlight">
             <pre>
<span></span><span class="kn">from</span> <span class="nn">clx.workflow.workflow</span> <span class="kn">import</span> <span class="n">Workflow</span>
<span class="k">class</span> <span class="nc">CustomWorkflow</span><span class="p">(</span><span class="n">Workflow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataframe</span><span class="p">):</span>
        <span class="n">dataframe</span><span class="p">[</span><span class="s2">"enriched"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"enriched output"</span>
        <span class="k">return</span> <span class="n">dataframe</span>

<span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"fs"</span><span class="p">,</span>
   <span class="s2">"input_format"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
   <span class="s2">"input_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/input/data"</span><span class="p">,</span>
   <span class="s2">"schema"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"raw"</span><span class="p">],</span>
   <span class="s2">"delimiter"</span><span class="p">:</span> <span class="s2">","</span><span class="p">,</span>
   <span class="s2">"required_cols"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"raw"</span><span class="p">],</span>
   <span class="s2">"dtype"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"str"</span><span class="p">],</span>
   <span class="s2">"header"</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
<span class="n">destination</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"fs"</span><span class="p">,</span>
   <span class="s2">"output_format"</span><span class="p">:</span> <span class="s2">"csv"</span><span class="p">,</span>
   <span class="s2">"output_path"</span><span class="p">:</span> <span class="s2">"/full/path/to/output/data"</span>
<span class="p">}</span>

<span class="n">my_new_workflow</span> <span class="o">=</span> <span class="n">CustomWorkflow</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"my_new_workflow"</span><span class="p">)</span>
<span class="n">my_new_workflow</span><span class="o">.</span><span class="n">run_workflow</span><span class="p">()</span>
</pre>
            </div>
           </div>
          </div>
         </div>
         <div class="section" id="Workflow-configurations-in-an-external-file">
          <h2>
           Workflow configurations in an external file
           <a class="headerlink" href="#Workflow-configurations-in-an-external-file" title="Permalink to this headline">
            ¶
           </a>
          </h2>
          <p>
           Sometimes workflow configurations may need to change dependent upon the environment. To avoid declaring workflow configurations within sourcecode you may also declare them in an external yaml file. A workflow will look for and establish I/O connections by searching for configurations in the following order:
          </p>
          <ol class="arabic simple">
           <li>
            <p>
             /etc/clx/[workflow-name]/workflow.yaml
            </p>
           </li>
           <li>
            <p>
             ~/.config/clx/[workflow-name]/workflow.yaml
            </p>
           </li>
           <li>
            <p>
             In-line python config
            </p>
           </li>
          </ol>
          <p>
           If source and destination are indicated in external files, they are not required to instantiate a new workflow
          </p>
          <div class="nbinput nblast docutils container">
           <div class="prompt highlight-none notranslate">
            <div class="highlight">
             <pre><span></span>[ ]:
</pre>
            </div>
           </div>
           <div class="input_area highlight-ipython3 notranslate">
            <div class="highlight">
             <pre>
<span></span><span class="c1"># Workflow config located at /etc/clx/my_new_workflow/workflow.yaml</span>
<span class="n">my_new_workflow</span> <span class="o">=</span> <span class="n">CustomWorkflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"my_new_workflow"</span><span class="p">)</span>
</pre>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <footer>
       <div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
        <a accesskey="n" class="btn btn-neutral float-right" href="intro-clx-dga.html" rel="next" title="CLX DGA Detection">
         Next
         <span class="fa fa-arrow-circle-right">
         </span>
        </a>
        <a accesskey="p" class="btn btn-neutral float-left" href="10min-clx.html" rel="prev" title="10 minutes to CLX">
         <span class="fa fa-arrow-circle-left">
         </span>
         Previous
        </a>
       </div>
       <hr/>
       <div role="contentinfo">
        <p>
         © Copyright 2019, NVIDIA
        </p>
       </div>
       Built with
       <a href="http://sphinx-doc.org/">
        Sphinx
       </a>
       using a
       <a href="https://github.com/rtfd/sphinx_rtd_theme">
        theme
       </a>
       provided by
       <a href="https://readthedocs.org">
        Read the Docs
       </a>
       .
      </footer>
     </div>
    </div>
   </section>
  </div>
  <script type="text/javascript">
   jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
  <script defer id="rapids-selector-js">
   var hiddenClassName = "rapids-selector--hidden";
var selectorContainers = document.querySelectorAll(
  ".rapids-selector__container"
);

/**
 * Closes all open menus. If a click handler event argument is given,
 * that event target's associated menu will not be closed.
 * @param {*} e - click event
 */
function closeOpenedMenusExcept(e) {
  e = e || false;
  for (var i = 0; i < selectorContainers.length; i++) {
    var selectorContainer = selectorContainers[i];
    if (e && e.target.parentNode === selectorContainer) continue;
    selectorContainer.classList.add(hiddenClassName);
  }
}

/**
 * Toggles the menu associated with clicked selector
 * @param {*} container - selector container element
 */
function toggleMenu(e) {
  var container = e.target.parentNode;
  container.classList.toggle(hiddenClassName);
}

/**
 * Returns true if the click event is outside of any of the
 * selector containers.
 * @param {*} e - click event
 */
function clickIsOutsideOfSelectContainers(e) {
  var targetEl = e.target;

  do {
    for (var i = 0; i < selectorContainers.length; i++) {
      var selector = selectorContainers[i];
      if (targetEl === selector) return false;
    }
    targetEl = targetEl.parentNode;
  } while (targetEl);

  return true;
}

/**
 * Returns true if any of the given elements are clicked
 * @param {*} e - click event
 * @param {*} elements - array of elements from document.querySelectorAll
 */
function anyElementIsClicked(e, elements) {
  for (var i = 0; i < elements.length; i++) {
    var element = elements[i];
    if (element === e.target) return true;
  }
  return false;
}

/**
 * Returns true if a selector is clicked
 * @param {*} e - click event
 */
function selectorIsClicked(e) {
  return anyElementIsClicked(
    e,
    document.querySelectorAll(".rapids-selector__selected")
  );
}

/**
 * Returns true if the already selected option is clicked
 * @param {*} e - click event
 */
function selectedOptionIsClicked(e) {
  return anyElementIsClicked(
    e,
    document.querySelectorAll(".rapids-selector__menu-item--selected")
  );
}

// Calculate height for dropdown animations
for (var i = 0; i < selectorContainers.length; i++) {
  var selector = selectorContainers[i];
  var menu = selector.querySelector(".rapids-selector__menu");
  menu.style.height = menu.scrollHeight + "px";
}

// Selectors click handler
document.addEventListener("click", function(e) {
  // Open/close menus on selector click
  if (selectorIsClicked(e)) {
    closeOpenedMenusExcept(e);
    toggleMenu(e);
  }

  // Close menus on outside click
  if (clickIsOutsideOfSelectContainers(e)) {
    closeOpenedMenusExcept();
  }

  // Prevent navigation and close menu when selected option is clicked
  if (selectedOptionIsClicked(e)) {
    e.preventDefault();
    closeOpenedMenusExcept();
  }
});
  </script>
 </body>
</html>