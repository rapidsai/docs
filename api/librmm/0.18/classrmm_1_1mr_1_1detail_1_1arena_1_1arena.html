<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.8.20" name="generator"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>RMM: rmm::mr::detail::arena::arena&lt; Upstream &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" id="rapids-fa-tag" rel="stylesheet"/><link href="/assets/css/custom.css" id="rapids-selector-css" rel="stylesheet"/></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea"><div id="rapids-doxygen-container"><div class="rapids-home-container"><a class="rapids-home-container__home-btn" href="/api">Home</a></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">librmm</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/clx/stable/api.html">clx</a><a class="rapids-selector__menu-item" href="/api/cudf/stable/api.html">cudf</a><a class="rapids-selector__menu-item" href="/api/cudf-java/stable">cudf-java</a><a class="rapids-selector__menu-item" href="/api/cugraph/stable/api.html">cugraph</a><a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">cuml</a><a class="rapids-selector__menu-item" href="/api/cusignal/stable/api.html">cusignal</a><a class="rapids-selector__menu-item" href="/api/cuspatial/stable/api.html">cuspatial</a><a class="rapids-selector__menu-item" href="/api/cuxfilter/stable">cuxfilter</a><a class="rapids-selector__menu-item" href="/api/libcudf/stable/namespacecudf.html">libcudf</a><a class="rapids-selector__menu-item" href="/api/libcugraph/stable">libcugraph</a><a class="rapids-selector__menu-item" href="/api/libcuml/stable">libcuml</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/librmm/stable/annotated.html">librmm</a><a class="rapids-selector__menu-item" href="/api/rmm/stable/api.html">rmm</a></div></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">stable (0.18)</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/librmm/nightly/annotated.html">nightly (0.19)</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/librmm/stable/annotated.html">stable (0.18)</a><a class="rapids-selector__menu-item" href="/api/librmm/legacy/annotated.html">legacy (0.17)</a></div></div></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>
<div class="navpath" id="nav-path">
<ul>
<li class="navelem"><b>rmm</b></li><li class="navelem"><b>mr</b></li><li class="navelem"><b>detail</b></li><li class="navelem"><b>arena</b></li><li class="navelem"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">arena</a></li> </ul>
</div>
</div><!-- top -->
<div class="header">
<div class="summary">
<a href="#pub-methods">Public Member Functions</a> |
<a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena-members.html">List of all members</a> </div>
<div class="headertitle">
<div class="title">rmm::mr::detail::arena::arena&lt; Upstream &gt; Class Template Reference</div> </div>
</div><!--header-->
<div class="contents">
<p>An arena for allocating memory for a thread.  
 <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#details">More...</a></p>
<p><code>#include &lt;<a class="el" href="arena_8hpp_source.html">arena.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a22599f2dab3727a7b2e1019bf5a9dfff"><td align="right" class="memItemLeft" valign="top"> </td><td class="memItemRight" valign="bottom"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#a22599f2dab3727a7b2e1019bf5a9dfff">arena</a> (<a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1global__arena.html">global_arena</a>&lt; Upstream &gt; &amp;<a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1global__arena.html">global_arena</a>)</td></tr>
<tr class="memdesc:a22599f2dab3727a7b2e1019bf5a9dfff"><td class="mdescLeft"> </td><td class="mdescRight">Construct an <code>arena</code>.  <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#a22599f2dab3727a7b2e1019bf5a9dfff">More...</a><br/></td></tr>
<tr class="separator:a22599f2dab3727a7b2e1019bf5a9dfff"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a5ec4b449cb3cae5e8f53ecc4078be140"><td align="right" class="memItemLeft" valign="top"><a id="a5ec4b449cb3cae5e8f53ecc4078be140"></a>
 </td><td class="memItemRight" valign="bottom"><b>arena</b> (const <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">arena</a> &amp;)=delete</td></tr>
<tr class="separator:a5ec4b449cb3cae5e8f53ecc4078be140"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a34ef67b9f6e749cb9ac576c41db021f9"><td align="right" class="memItemLeft" valign="top"><a id="a34ef67b9f6e749cb9ac576c41db021f9"></a>
<a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">arena</a> &amp; </td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">arena</a> &amp;)=delete</td></tr>
<tr class="separator:a34ef67b9f6e749cb9ac576c41db021f9"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a3a9cf415216f0b50104b34572e72a0bf"><td align="right" class="memItemLeft" valign="top">void * </td><td class="memItemRight" valign="bottom"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#a3a9cf415216f0b50104b34572e72a0bf">allocate</a> (std::size_t bytes)</td></tr>
<tr class="memdesc:a3a9cf415216f0b50104b34572e72a0bf"><td class="mdescLeft"> </td><td class="mdescRight">Allocates memory of size at least <code>bytes</code>.  <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#a3a9cf415216f0b50104b34572e72a0bf">More...</a><br/></td></tr>
<tr class="separator:a3a9cf415216f0b50104b34572e72a0bf"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ab4ecb933435fde24875af21e457682c7"><td align="right" class="memItemLeft" valign="top">bool </td><td class="memItemRight" valign="bottom"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#ab4ecb933435fde24875af21e457682c7">deallocate</a> (void *p, std::size_t bytes, <a class="el" href="classrmm_1_1cuda__stream__view.html">cuda_stream_view</a> stream)</td></tr>
<tr class="memdesc:ab4ecb933435fde24875af21e457682c7"><td class="mdescLeft"> </td><td class="mdescRight">Deallocate memory pointed to by <code>p</code>, and possibly return superblocks to upstream.  <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#ab4ecb933435fde24875af21e457682c7">More...</a><br/></td></tr>
<tr class="separator:ab4ecb933435fde24875af21e457682c7"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:af6bfb8a7044b29decf166eb20c2490a3"><td align="right" class="memItemLeft" valign="top">bool </td><td class="memItemRight" valign="bottom"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#af6bfb8a7044b29decf166eb20c2490a3">deallocate</a> (void *p, std::size_t bytes)</td></tr>
<tr class="memdesc:af6bfb8a7044b29decf166eb20c2490a3"><td class="mdescLeft"> </td><td class="mdescRight">Deallocate memory pointed to by <code>p</code>, keeping all free superblocks.  <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#af6bfb8a7044b29decf166eb20c2490a3">More...</a><br/></td></tr>
<tr class="separator:af6bfb8a7044b29decf166eb20c2490a3"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:ab98c95b4d8f1781aabda59abc5eec4ae"><td align="right" class="memItemLeft" valign="top">void </td><td class="memItemRight" valign="bottom"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#ab98c95b4d8f1781aabda59abc5eec4ae">clean</a> ()</td></tr>
<tr class="memdesc:ab98c95b4d8f1781aabda59abc5eec4ae"><td class="mdescLeft"> </td><td class="mdescRight">Clean the arena and deallocate free blocks from the global arena.  <a href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html#ab98c95b4d8f1781aabda59abc5eec4ae">More...</a><br/></td></tr>
<tr class="separator:ab98c95b4d8f1781aabda59abc5eec4ae"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Upstream&gt;<br/>
class rmm::mr::detail::arena::arena&lt; Upstream &gt;</h3>
<p>An arena for allocating memory for a thread. </p>
<p>An arena is a per-thread or per-non-default-stream memory pool. It allocates superblocks from the global arena, and return them when the superblocks become empty.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
<table class="tparams">
<tr><td class="paramname">Upstream</td><td>Memory resource to use for allocating the global arena. Implements <a class="el" href="classrmm_1_1mr_1_1device__memory__resource.html" title="Base class for all libcudf device memory allocation.">rmm::mr::device_memory_resource</a> interface. </td></tr>
</table>
</dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a22599f2dab3727a7b2e1019bf5a9dfff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22599f2dab3727a7b2e1019bf5a9dfff">◆ </a></span>arena()</h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Upstream &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">rmm::mr::detail::arena::arena</a>&lt; Upstream &gt;::<a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">arena</a> </td>
<td>(</td>
<td class="paramtype"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1global__arena.html">global_arena</a>&lt; Upstream &gt; &amp; </td>
<td class="paramname"><em>global_arena</em></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Construct an <code>arena</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname"><a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1global__arena.html" title="The global arena for allocating memory from the upstream memory resource.">global_arena</a></td><td>The global arena from which to allocate superblocks. </td></tr>
</table>
</dd>
</dl>
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3a9cf415216f0b50104b34572e72a0bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9cf415216f0b50104b34572e72a0bf">◆ </a></span>allocate()</h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Upstream &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">void* <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">rmm::mr::detail::arena::arena</a>&lt; Upstream &gt;::allocate </td>
<td>(</td>
<td class="paramtype">std::size_t </td>
<td class="paramname"><em>bytes</em></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Allocates memory of size at least <code>bytes</code>. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
<table class="exception">
<tr><td class="paramname">&lt;tt&gt;std::bad_alloc&lt;/tt&gt;</td><td>if the requested allocation could not be fulfilled.</td></tr>
</table>
</dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">bytes</td><td>The size in bytes of the allocation. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void* Pointer to the newly allocated memory. </dd></dl>
</div>
</div>
<a id="ab98c95b4d8f1781aabda59abc5eec4ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab98c95b4d8f1781aabda59abc5eec4ae">◆ </a></span>clean()</h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Upstream &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">void <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">rmm::mr::detail::arena::arena</a>&lt; Upstream &gt;::clean </td>
<td>(</td>
<td class="paramname"></td><td>)</td>
<td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Clean the arena and deallocate free blocks from the global arena. </p>
<p>This is only needed when a per-thread arena is about to die. </p>
</div>
</div>
<a id="af6bfb8a7044b29decf166eb20c2490a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6bfb8a7044b29decf166eb20c2490a3">◆ </a></span>deallocate() <span class="overload">[1/2]</span></h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Upstream &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">bool <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">rmm::mr::detail::arena::arena</a>&lt; Upstream &gt;::deallocate </td>
<td>(</td>
<td class="paramtype">void * </td>
<td class="paramname"><em>p</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">std::size_t </td>
<td class="paramname"><em>bytes</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Deallocate memory pointed to by <code>p</code>, keeping all free superblocks. </p>
<p>This is done when deallocating from another arena. Since we don't have access to the CUDA stream associated with this arena, we don't coalesce the freed block and return it directly to the global arena.</p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">p</td><td>Pointer to be deallocated. </td></tr>
<tr><td class="paramname">bytes</td><td>The size in bytes of the allocation. This must be equal to the value of <code>bytes</code> that was passed to the <code>allocate</code> call that returned <code>p</code>. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the allocation is found, false otherwise. </dd></dl>
</div>
</div>
<a id="ab4ecb933435fde24875af21e457682c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4ecb933435fde24875af21e457682c7">◆ </a></span>deallocate() <span class="overload">[2/2]</span></h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Upstream &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname">bool <a class="el" href="classrmm_1_1mr_1_1detail_1_1arena_1_1arena.html">rmm::mr::detail::arena::arena</a>&lt; Upstream &gt;::deallocate </td>
<td>(</td>
<td class="paramtype">void * </td>
<td class="paramname"><em>p</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">std::size_t </td>
<td class="paramname"><em>bytes</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classrmm_1_1cuda__stream__view.html">cuda_stream_view</a> </td>
<td class="paramname"><em>stream</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Deallocate memory pointed to by <code>p</code>, and possibly return superblocks to upstream. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">p</td><td>Pointer to be deallocated. </td></tr>
<tr><td class="paramname">bytes</td><td>The size in bytes of the allocation. This must be equal to the value of <code>bytes</code> that was passed to the <code>allocate</code> call that returned <code>p</code>. </td></tr>
<tr><td class="paramname">stream</td><td>Stream on which to perform deallocation. </td></tr>
</table>
</dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the allocation is found, false otherwise. </dd></dl>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="arena_8hpp_source.html">arena.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html"><img alt="doxygen" class="footer" height="31" src="doxygen.svg" width="104"/></a> 1.8.20
</small></address>
<script defer id="rapids-selector-js" src="/assets/js/custom.js"></script></body>
</html>
