<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.8.16" name="generator"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>libcudf: cudf::experimental::groupby::detail::hash::compute_single_pass_aggs&lt; skip_rows_with_nulls, Map &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" id="rapids-fa-tag" rel="stylesheet"/><link href="/assets/css/custom.css" id="rapids-selector-css" rel="stylesheet"/></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea"><div id="rapids-doxygen-container"><div class="rapids-home-container"><a class="rapids-home-container__home-btn" href="/api">Home</a></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">libcudf</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/clx/stable/api.html">clx</a><a class="rapids-selector__menu-item" href="/api/cudf/stable/api.html">cudf</a><a class="rapids-selector__menu-item" href="/api/cugraph/stable/api.html">cugraph</a><a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">cuml</a><a class="rapids-selector__menu-item" href="/api/cusignal/stable/api.html">cusignal</a><a class="rapids-selector__menu-item" href="/api/cuspatial/stable/api.html">cuspatial</a><a class="rapids-selector__menu-item" href="/api/cuxfilter/stable">cuxfilter</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/stable/namespacecudf.html">libcudf</a><a class="rapids-selector__menu-item" href="/api/libcuml/nightly">libcuml</a><a class="rapids-selector__menu-item" href="/api/libnvstrings/stable/annotated.html">libnvstrings</a><a class="rapids-selector__menu-item" href="/api/nvstrings/stable/api.html">nvstrings</a><a class="rapids-selector__menu-item" href="/api/rmm/stable/annotated.html">rmm</a></div></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">stable (0.13)</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/libcudf/nightly/namespacecudf.html">nightly (0.14)</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/stable/namespacecudf.html">stable (0.13)</a><a class="rapids-selector__menu-item" href="/api/libcudf/legacy/namespacecudf.html">legacy (0.12)</a></div></div></div>

</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>
<div class="navpath" id="nav-path">
<ul>
<li class="navelem"><a class="el" href="namespacecudf.html">cudf</a></li><li class="navelem"><a class="el" href="namespacecudf_1_1experimental.html">experimental</a></li><li class="navelem"><b>groupby</b></li><li class="navelem"><b>detail</b></li><li class="navelem"><b>hash</b></li><li class="navelem"><a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html">compute_single_pass_aggs</a></li> </ul>
</div>
</div><!-- top -->
<div class="header">
<div class="summary">
<a href="#pub-methods">Public Member Functions</a> |
<a href="#pub-attribs">Public Attributes</a> |
<a href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs-members.html">List of all members</a> </div>
<div class="headertitle">
<div class="title">cudf::experimental::groupby::detail::hash::compute_single_pass_aggs&lt; skip_rows_with_nulls, Map &gt; Struct Template Reference</div> </div>
</div><!--header-->
<div class="contents">
<p>Compute single-pass aggregations and store results into a sparse <code>output_values</code> table, and populate <code>map</code> with indices of unique keys.  
 <a href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for cudf::experimental::groupby::detail::hash::compute_single_pass_aggs&lt; skip_rows_with_nulls, Map &gt;:</div>
<div class="dyncontent">
<div class="center"><img alt="Collaboration graph" border="0" src="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs__coll__graph.png" usemap="#cudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs_3_01skip__rows__with__nulls_00_01Map_01_4_coll__map"/></div>
<map id="cudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs_3_01skip__rows__with__nulls_00_01Map_01_4_coll__map" name="cudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs_3_01skip__rows__with__nulls_00_01Map_01_4_coll__map">
<area alt="" coords="799,49,1111,119" shape="rect" title="Compute single-pass aggregations and store results into a sparse output_values table,..."/>
<area alt="" coords="357,27,609,53" href="classcudf_1_1table__device__view.html" shape="rect" title=" "/>
<area alt="" coords="15,5,298,61" href="classcudf_1_1detail_1_1table__device__view__base.html" shape="rect" title=" "/>
<area alt="" coords="377,93,589,134" href="classcudf_1_1mutable__table__device__view.html" shape="rect" title=" "/>
<area alt="" coords="5,86,308,157" href="classcudf_1_1detail_1_1table__device__view__base.html" shape="rect" title=" "/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7d468c822939a543cbddc30101d32102"><td align="right" class="memItemLeft" valign="top"> </td><td class="memItemRight" valign="bottom"><a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html#a7d468c822939a543cbddc30101d32102">compute_single_pass_aggs</a> (Map map, size_type num_keys, <a class="el" href="classcudf_1_1table__device__view.html">table_device_view</a> input_values, <a class="el" href="classcudf_1_1mutable__table__device__view.html">mutable_table_device_view</a> output_values, <a class="el" href="classcudf_1_1experimental_1_1aggregation.html#a86a800d62c1b8a500f7920fd1ca0189d">aggregation::Kind</a> const *aggs, bitmask_type const *row_bitmask)</td></tr>
<tr class="memdesc:a7d468c822939a543cbddc30101d32102"><td class="mdescLeft"> </td><td class="mdescRight">Construct a new <a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html" title="Compute single-pass aggregations and store results into a sparse output_values table,...">compute_single_pass_aggs</a> functor object.  <a href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html#a7d468c822939a543cbddc30101d32102">More...</a><br/></td></tr>
<tr class="separator:a7d468c822939a543cbddc30101d32102"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a3922e5b535551c5bb5c735e8eca515ed"><td align="right" class="memItemLeft" valign="top"><a id="a3922e5b535551c5bb5c735e8eca515ed"></a>
__device__ void </td><td class="memItemRight" valign="bottom"><b>operator()</b> (size_type i)</td></tr>
<tr class="separator:a3922e5b535551c5bb5c735e8eca515ed"><td class="memSeparator" colspan="2"> </td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2508e7256b7853555d79fb47fec403c5"><td align="right" class="memItemLeft" valign="top"><a id="a2508e7256b7853555d79fb47fec403c5"></a>
Map </td><td class="memItemRight" valign="bottom"><b>map</b></td></tr>
<tr class="separator:a2508e7256b7853555d79fb47fec403c5"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:aeb4e5328233eaa45d6836097ec5ba9f4"><td align="right" class="memItemLeft" valign="top"><a id="aeb4e5328233eaa45d6836097ec5ba9f4"></a>
size_type </td><td class="memItemRight" valign="bottom"><b>num_keys</b></td></tr>
<tr class="separator:aeb4e5328233eaa45d6836097ec5ba9f4"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a4aae936eeab542f38677ceb0a81bfb39"><td align="right" class="memItemLeft" valign="top"><a id="a4aae936eeab542f38677ceb0a81bfb39"></a>
<a class="el" href="classcudf_1_1table__device__view.html">table_device_view</a> </td><td class="memItemRight" valign="bottom"><b>input_values</b></td></tr>
<tr class="separator:a4aae936eeab542f38677ceb0a81bfb39"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:aa597ae0780a55b84843185a23b1c5766"><td align="right" class="memItemLeft" valign="top"><a id="aa597ae0780a55b84843185a23b1c5766"></a>
<a class="el" href="classcudf_1_1mutable__table__device__view.html">mutable_table_device_view</a> </td><td class="memItemRight" valign="bottom"><b>output_values</b></td></tr>
<tr class="separator:aa597ae0780a55b84843185a23b1c5766"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a48a2151f3a1187fc03a9b9e5ff56dd80"><td align="right" class="memItemLeft" valign="top"><a id="a48a2151f3a1187fc03a9b9e5ff56dd80"></a>
<a class="el" href="classcudf_1_1experimental_1_1aggregation.html#a86a800d62c1b8a500f7920fd1ca0189d">aggregation::Kind</a> const  *__restrict__ </td><td class="memItemRight" valign="bottom"><b>aggs</b></td></tr>
<tr class="separator:a48a2151f3a1187fc03a9b9e5ff56dd80"><td class="memSeparator" colspan="2"> </td></tr>
<tr class="memitem:a04e8fff285e8e46ef879f32565bde0f6"><td align="right" class="memItemLeft" valign="top"><a id="a04e8fff285e8e46ef879f32565bde0f6"></a>
bitmask_type const  *__restrict__ </td><td class="memItemRight" valign="bottom"><b>row_bitmask</b></td></tr>
<tr class="separator:a04e8fff285e8e46ef879f32565bde0f6"><td class="memSeparator" colspan="2"> </td></tr>
</table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;bool skip_rows_with_nulls, typename Map&gt;<br/>
struct cudf::experimental::groupby::detail::hash::compute_single_pass_aggs&lt; skip_rows_with_nulls, Map &gt;</h3>
<p>Compute single-pass aggregations and store results into a sparse <code>output_values</code> table, and populate <code>map</code> with indices of unique keys. </p>
<p>The hash map is built by inserting every row <code>i</code> from the <code>keys</code> and <code>values</code> tables as a single (key,value) pair. When the pair is inserted, if the key was not already present in the map, then the corresponding value is simply copied to the output. If the key was already present in the map, then the inserted <code>values</code> row is aggregated with the existing row. This aggregation is done for every element <code>j</code> in the row by applying aggregation operation <code>j</code> between the new and existing element.</p>
<p>Instead of storing the entire rows from <code>input_keys</code> and <code>input_values</code> in the hashmap, we instead store the row indices. For example, when inserting row at index <code>i</code> from <code>input_keys</code> into the hash map, the value <code>i</code> is what gets stored for the hash map's "key". It is assumed the <code>map</code> was constructed with a custom comparator that uses these row indices to check for equality between key rows. For example, comparing two keys <code>k0</code> and <code>k1</code> will compare the two rows <code>input_keys[k0] ?= input_keys[k1]</code></p>
<p>Likewise, we store the row indices for the hash maps "values". These indices index into the <code>output_values</code> table. For a given key <code>k</code> (which is an index into <code>input_keys</code>), the corresponding value <code>v</code> indexes into <code>output_values</code> and stores the result of aggregating rows from <code>input_values</code> from rows of <code>input_keys</code> equivalent to the row at <code>k</code>.</p>
<p>The exact size of the result is not known a priori, but can be upper bounded by the number of rows in <code>input_keys</code> &amp; <code>input_values</code>. Therefore, it is assumed <code>output_values</code> has sufficient storage for an equivalent number of rows. In this way, after all rows are aggregated, <code>output_values</code> will likely be "sparse", meaning that not all rows contain the result of an aggregation.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
<table class="tparams">
<tr><td class="paramname">skip_rows_with_nulls</td><td>Indicates if rows in <code>input_keys</code> containing null values should be skipped. It <code>true</code>, it is assumed <code>row_bitmask</code> is a bitmask where bit <code>i</code> indicates the presence of a null value in row <code>i</code>. </td></tr>
<tr><td class="paramname">Map</td><td>The type of the hash map </td></tr>
</table>
</dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7d468c822939a543cbddc30101d32102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d468c822939a543cbddc30101d32102">◆ </a></span>compute_single_pass_aggs()</h2>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool skip_rows_with_nulls, typename Map &gt; </div>
<table class="mlabels">
<tr>
<td class="mlabels-left">
<table class="memname">
<tr>
<td class="memname"><a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html">cudf::experimental::groupby::detail::hash::compute_single_pass_aggs</a>&lt; skip_rows_with_nulls, Map &gt;::<a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html">compute_single_pass_aggs</a> </td>
<td>(</td>
<td class="paramtype">Map </td>
<td class="paramname"><em>map</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">size_type </td>
<td class="paramname"><em>num_keys</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1table__device__view.html">table_device_view</a> </td>
<td class="paramname"><em>input_values</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1mutable__table__device__view.html">mutable_table_device_view</a> </td>
<td class="paramname"><em>output_values</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype"><a class="el" href="classcudf_1_1experimental_1_1aggregation.html#a86a800d62c1b8a500f7920fd1ca0189d">aggregation::Kind</a> const * </td>
<td class="paramname"><em>aggs</em>, </td>
</tr>
<tr>
<td class="paramkey"></td>
<td></td>
<td class="paramtype">bitmask_type const * </td>
<td class="paramname"><em>row_bitmask</em> </td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td><td></td>
</tr>
</table>
</td>
<td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span> </td>
</tr>
</table>
</div><div class="memdoc">
<p>Construct a new <a class="el" href="structcudf_1_1experimental_1_1groupby_1_1detail_1_1hash_1_1compute__single__pass__aggs.html" title="Compute single-pass aggregations and store results into a sparse output_values table,...">compute_single_pass_aggs</a> functor object. </p>
<dl class="params"><dt>Parameters</dt><dd>
<table class="params">
<tr><td class="paramname">map</td><td>Hash map object to insert key,value pairs into. </td></tr>
<tr><td class="paramname">num_keys</td><td>The number of rows in input keys table </td></tr>
<tr><td class="paramname">input_values</td><td>The table whose rows will be aggregated in the values of the hash map </td></tr>
<tr><td class="paramname">output_values</td><td>Table that stores the results of aggregating rows of <code>input_values</code>. </td></tr>
<tr><td class="paramname">aggs</td><td>The set of aggregation operations to perform accross the columns of the <code>input_values</code> rows </td></tr>
<tr><td class="paramname">row_bitmask</td><td>Bitmask where bit <code>i</code> indicates the presence of a null value in row <code>i</code> of input keys. Only used if <code>skip_rows_with_nulls</code> is <code>true</code> </td></tr>
</table>
</dd>
</dl>
</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>hash/groupby_kernels.cuh</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by  <a href="http://www.doxygen.org/index.html">
<img alt="doxygen" class="footer" src="doxygen.png"/>
</a> 1.8.16
</small></address>
<script defer id="rapids-selector-js" src="/assets/js/custom.js"></script></body>
</html>
