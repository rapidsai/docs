<!-- HTML header for doxygen 1.8.20--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type">
<meta content="IE=9" http-equiv="X-UA-Compatible">
<meta content="Doxygen 1.8.20" name="generator">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>libcudf: Partitioning</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css">
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<!-- RAPIDS CUSTOM JS & CSS: START, Please add these two lines back after every version upgrade -->
<script defer src="https://docs.rapids.ai/assets/js/custom.js"></script>
<link href="https://docs.rapids.ai/assets/css/custom.css" rel="stylesheet">
<!-- RAPIDS CUSTOM JS & CSS: END -->
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" id="rapids-fa-tag" rel="stylesheet"><script id="rapids-selector-pixel-src" src="https://assets.adobedtm.com/5d4962a43b79/814eb6e9b4e1/launch-4bc07f1e0b0b.min.js"></script><link href="/assets/css/custom.css" id="rapids-selector-css" rel="stylesheet"></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea"><div id="rapids-doxygen-container"><div class="rapids-home-container"><a class="rapids-home-container__home-btn" href="/api">Home</a></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">libcudf</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/clx/stable/api.html">clx</a><a class="rapids-selector__menu-item" href="/api/cucim/stable/api.html">cucim</a><a class="rapids-selector__menu-item" href="/api/cudf-java/stable">cudf-java</a><a class="rapids-selector__menu-item" href="/api/cudf/stable/index.html">cudf</a><a class="rapids-selector__menu-item" href="/api/cugraph/stable">cugraph</a><a class="rapids-selector__menu-item" href="/api/cuml/stable/api.html">cuml</a><a class="rapids-selector__menu-item" href="/api/cusignal/stable/api.html">cusignal</a><a class="rapids-selector__menu-item" href="/api/cuspatial/stable">cuspatial</a><a class="rapids-selector__menu-item" href="/api/cuxfilter/stable">cuxfilter</a><a class="rapids-selector__menu-item" href="/api/dask-cuda/stable/api.html">dask-cuda</a><a class="rapids-selector__menu-item" href="/api/kvikio/stable/api.html">kvikio</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/stable/namespacecudf.html">libcudf</a><a class="rapids-selector__menu-item" href="/api/libcugraph/stable">libcugraph</a><a class="rapids-selector__menu-item" href="/api/libcuml/stable">libcuml</a><a class="rapids-selector__menu-item" href="/api/libcuspatial/stable">libcuspatial</a><a class="rapids-selector__menu-item" href="/api/libkvikio/stable">libkvikio</a><a class="rapids-selector__menu-item" href="/api/librmm/stable/annotated.html">librmm</a><a class="rapids-selector__menu-item" href="/api/raft/stable">raft</a><a class="rapids-selector__menu-item" href="/api/rapids-cmake/stable/api.html">rapids-cmake</a><a class="rapids-selector__menu-item" href="/api/rmm/stable/api.html">rmm</a></div></div><div class="rapids-selector__container rapids-selector--hidden"><div class="rapids-selector__selected">legacy (22.12)</div><div class="rapids-selector__menu"><a class="rapids-selector__menu-item" href="/api/libcudf/nightly/namespacecudf.html">nightly (23.04)</a><a class="rapids-selector__menu-item" href="/api/libcudf/stable/namespacecudf.html">stable (23.02)</a><a class="rapids-selector__menu-item rapids-selector__menu-item--selected" href="/api/libcudf/legacy/namespacecudf.html">legacy (22.12)</a></div></div></div>

</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> |
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Partitioning<div class="ingroups"><a class="el" href="group__column__apis.html">Column and Table</a> &raquo; <a class="el" href="group__column__reorder.html">Reordering</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tbody><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:partitioning_8hpp"><td align="right" class="memItemLeft" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="partitioning_8hpp.html">partitioning.hpp</a></td></tr>
<tr class="memdesc:partitioning_8hpp"><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Column partitioning APIs. <br></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&nbsp;</td></tr>
</tbody></table><table class="memberdecls">
<tbody><tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaaf67a199330b1a1feeecc9b6cf20e42"><td align="right" class="memItemLeft" valign="top">std::pair&lt; std::unique_ptr&lt; <a class="el" href="classcudf_1_1table.html">table</a> &gt;, std::vector&lt; <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__reorder__partition.html#gaaaf67a199330b1a1feeecc9b6cf20e42">cudf::partition</a> (<a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;t, <a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp;partition_map, <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a> num_partitions, <a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *mr=<a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>())</td></tr>
<tr class="memdesc:gaaaf67a199330b1a1feeecc9b6cf20e42"><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Partitions rows of <code>t</code> according to the mapping specified by <code>partition_map</code>.  <a href="group__reorder__partition.html#gaaaf67a199330b1a1feeecc9b6cf20e42">More...</a><br></td></tr>
<tr class="separator:gaaaf67a199330b1a1feeecc9b6cf20e42"><td class="memSeparator" colspan="2">&nbsp;</td></tr>
<tr class="memitem:ga65fe4ae8d1cbe9db31dbda43ebea0e7a"><td align="right" class="memItemLeft" valign="top">std::pair&lt; std::unique_ptr&lt; <a class="el" href="classcudf_1_1table.html">table</a> &gt;, std::vector&lt; <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__reorder__partition.html#ga65fe4ae8d1cbe9db31dbda43ebea0e7a">cudf::hash_partition</a> (<a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;input, std::vector&lt; <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a> &gt; const &amp;columns_to_hash, int num_partitions, <a class="el" href="group__column__hash.html#gaced8b9d129825edd13d76e912e4413c3">hash_id</a> hash_function=hash_id::HASH_MURMUR3, uint32_t seed=DEFAULT_HASH_SEED, <a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1cuda__stream__view.html">rmm::cuda_stream_view</a> stream=<a class="el" href="namespacecudf.html#a001ed29e71e759518cae31e52312befa">cudf::get_default_stream</a>(), <a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *mr=<a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>())</td></tr>
<tr class="memdesc:ga65fe4ae8d1cbe9db31dbda43ebea0e7a"><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Partitions rows from the input table into multiple output tables.  <a href="group__reorder__partition.html#ga65fe4ae8d1cbe9db31dbda43ebea0e7a">More...</a><br></td></tr>
<tr class="separator:ga65fe4ae8d1cbe9db31dbda43ebea0e7a"><td class="memSeparator" colspan="2">&nbsp;</td></tr>
<tr class="memitem:gaaa13f6a8e7ea9e9e120bb72cbc9afc8e"><td align="right" class="memItemLeft" valign="top">std::pair&lt; std::unique_ptr&lt; <a class="el" href="classcudf_1_1table.html">cudf::table</a> &gt;, std::vector&lt; <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__reorder__partition.html#gaaa13f6a8e7ea9e9e120bb72cbc9afc8e">cudf::round_robin_partition</a> (<a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;input, <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a> num_partitions, <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a> start_partition=0, <a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *mr=<a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>())</td></tr>
<tr class="memdesc:gaaa13f6a8e7ea9e9e120bb72cbc9afc8e"><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Round-robin partition.  <a href="group__reorder__partition.html#gaaa13f6a8e7ea9e9e120bb72cbc9afc8e">More...</a><br></td></tr>
<tr class="separator:gaaa13f6a8e7ea9e9e120bb72cbc9afc8e"><td class="memSeparator" colspan="2">&nbsp;</td></tr>
</tbody></table>
<a id="details" name="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga65fe4ae8d1cbe9db31dbda43ebea0e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65fe4ae8d1cbe9db31dbda43ebea0e7a">◆&nbsp;</a></span>hash_partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tbody><tr>
          <td class="memname">std::pair&lt;std::unique_ptr&lt;<a class="el" href="classcudf_1_1table.html">table</a>&gt;, std::vector&lt;<a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a>&gt; &gt; cudf::hash_partition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;&nbsp;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a> &gt; const &amp;&nbsp;</td>
          <td class="paramname"><em>columns_to_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"><em>num_partitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__column__hash.html#gaced8b9d129825edd13d76e912e4413c3">hash_id</a>&nbsp;</td>
          <td class="paramname"><em>hash_function</em> = <code>hash_id::HASH_MURMUR3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"><em>seed</em> = <code>DEFAULT_HASH_SEED</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1cuda__stream__view.html">rmm::cuda_stream_view</a>&nbsp;</td>
          <td class="paramname"><em>stream</em> = <code><a class="el" href="namespacecudf.html#a001ed29e71e759518cae31e52312befa">cudf::get_default_stream</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *&nbsp;</td>
          <td class="paramname"><em>mr</em> = <code><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>()</code>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </tbody></table>
</div><div class="memdoc">

<p>Partitions rows from the input table into multiple output tables. </p>
<p>Partitions rows of <code>input</code> into <code>num_partitions</code> bins based on the hash value of the columns specified by <code>columns_to_hash</code>. Rows partitioned into the same bin are grouped consecutively in the output table. Returns a vector of row offsets to the start of each partition in the output table.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tbody><tr><td class="paramname">std::out_of_range</td><td>if index is <code>columns_to_hash</code> is invalid</td></tr>
  </tbody></table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tbody><tr><td class="paramname">input</td><td>The table to partition </td></tr>
    <tr><td class="paramname">columns_to_hash</td><td>Indices of input columns to hash </td></tr>
    <tr><td class="paramname">num_partitions</td><td>The number of partitions to use </td></tr>
    <tr><td class="paramname">hash_function</td><td>Optional hash id that chooses the hash function to use </td></tr>
    <tr><td class="paramname">seed</td><td>Optional seed value to the hash function </td></tr>
    <tr><td class="paramname">stream</td><td>CUDA stream used for device memory operations and kernel launches </td></tr>
    <tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned table's device memory</td></tr>
  </tbody></table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An output table and a vector of row offsets to each partition </dd></dl>

</div>
</div>
<a id="gaaaf67a199330b1a1feeecc9b6cf20e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaaf67a199330b1a1feeecc9b6cf20e42">◆&nbsp;</a></span>partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tbody><tr>
          <td class="memname">std::pair&lt;std::unique_ptr&lt;<a class="el" href="classcudf_1_1table.html">table</a>&gt;, std::vector&lt;<a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a>&gt; &gt; cudf::partition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;&nbsp;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcudf_1_1column__view.html">column_view</a> const &amp;&nbsp;</td>
          <td class="paramname"><em>partition_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">size_type</a>&nbsp;</td>
          <td class="paramname"><em>num_partitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *&nbsp;</td>
          <td class="paramname"><em>mr</em> = <code><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>()</code>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </tbody></table>
</div><div class="memdoc">

<p>Partitions rows of <code>t</code> according to the mapping specified by <code>partition_map</code>. </p>
<p>For each row at <code>i</code> in <code>t</code>, <code>partition_map[i]</code> indicates which partition row <code>i</code> belongs to. <code>partition</code> creates a new table by rearranging the rows of <code>t</code> such that rows in the same partition are contiguous. The returned table is in ascending partition order from <code>[0, num_partitions)</code>. The order within each partition is undefined.</p>
<p>Returns a <code>vector&lt;size_type&gt;</code> of <code>num_partitions + 1</code> values that indicate the starting position of each partition within the returned table, i.e., partition <code>i</code> starts at <code>offsets[i]</code> (inclusive) and ends at <code>offset[i+1]</code> (exclusive). As a result, if value <code>j</code> in <code>[0, num_partitions)</code> does not appear in <code>partition_map</code>, partition <code>j</code> will be empty, i.e., <code>offsets[j+1] - offsets[j] == 0</code>.</p>
<p>Values in <code>partition_map</code> must be in the range <code>[0, num_partitions)</code>, otherwise behavior is undefined.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tbody><tr><td class="paramname"><a class="el" href="structcudf_1_1logic__error.html" title="Exception thrown when logical precondition is violated.">cudf::logic_error</a></td><td>when <code>partition_map</code> is a non-integer type </td></tr>
    <tr><td class="paramname"><a class="el" href="structcudf_1_1logic__error.html" title="Exception thrown when logical precondition is violated.">cudf::logic_error</a></td><td>when <code><a class="el" href="namespacecudf.html#a0b69e95220c2cc259bbf510506b6fff9" title="Returns True if the table has nulls in any of its columns.">partition_map.has_nulls()</a> == true</code> </td></tr>
    <tr><td class="paramname"><a class="el" href="structcudf_1_1logic__error.html" title="Exception thrown when logical precondition is violated.">cudf::logic_error</a></td><td>when <code>partition_map.size() != t.num_rows()</code></td></tr>
  </tbody></table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tbody><tr><td class="paramname">t</td><td>The table to partition </td></tr>
    <tr><td class="paramname">partition_map</td><td>Non-nullable column of integer values that map each row in <code>t</code> to it's partition. </td></tr>
    <tr><td class="paramname">num_partitions</td><td>The total number of partitions </td></tr>
    <tr><td class="paramname">mr</td><td>Device memory resource used to allocate the returned table's device memory </td></tr>
  </tbody></table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair containing the reordered table and vector of <code>num_partitions + 1</code> offsets to each partition such that the size of partition <code>i</code> is determined by <code>offset[i+1] - offset[i]</code>. </dd></dl>

</div>
</div>
<a id="gaaa13f6a8e7ea9e9e120bb72cbc9afc8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa13f6a8e7ea9e9e120bb72cbc9afc8e">◆&nbsp;</a></span>round_robin_partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tbody><tr>
          <td class="memname">std::pair&lt;std::unique_ptr&lt;<a class="el" href="classcudf_1_1table.html">cudf::table</a>&gt;, std::vector&lt;<a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a>&gt; &gt; cudf::round_robin_partition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcudf_1_1table__view.html">table_view</a> const &amp;&nbsp;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a>&nbsp;</td>
          <td class="paramname"><em>num_partitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__utility__types.html#ga0aff16b2db009d92300befaca11827e9">cudf::size_type</a>&nbsp;</td>
          <td class="paramname"><em>start_partition</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/classrmm_1_1mr_1_1device__memory__resource.html">rmm::mr::device_memory_resource</a> *&nbsp;</td>
          <td class="paramname"><em>mr</em> = <code><a class="elRef" href="https://docs.rapids.ai/api/librmm/22.12/per__device__resource_8hpp.html#a95bf69637b8f3d29b13b33562370fc8f">rmm::mr::get_current_device_resource</a>()</code>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </tbody></table>
</div><div class="memdoc">

<p>Round-robin partition. </p>
<p>Returns a new table with rows re-arranged into partition groups and a vector of row offsets to the start of each partition in the output table. Rows are assigned partitions based on their row index in the table, in a round robin fashion.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tbody><tr><td class="paramname"><a class="el" href="structcudf_1_1logic__error.html" title="Exception thrown when logical precondition is violated.">cudf::logic_error</a></td><td>if <code>num_partitions &lt;= 1</code> </td></tr>
    <tr><td class="paramname"><a class="el" href="structcudf_1_1logic__error.html" title="Exception thrown when logical precondition is violated.">cudf::logic_error</a></td><td>if <code>start_partition &gt;= num_partitions</code></td></tr>
  </tbody></table>
  </dd>
</dl>
<p>A good analogy for the algorithm is dealing out cards:</p>
<ol type="1">
<li>The deck of cards is represented as the rows in the table.</li>
<li>The number of partitions is the number of players being dealt cards.</li>
<li>the start_partition indicates which player starts getting cards first.</li>
</ol>
<p>The algorithm has two outcomes:</p>
<ol type="1">
<li>Another deck of cards formed by stacking each player's cards back into a deck again, preserving the order of cards dealt to each player, starting with player 0.</li>
<li>A vector into the output deck indicating where a player's cards start.</li>
</ol>
<p>A player's deck (partition) is the range of cards starting at the corresponding offset and ending at the next player's starting offset or the last card in the deck if it's the last player.</p>
<p>When num_partitions &gt; nrows, we have more players than cards. We start dealing to the first indicated player and continuing around the players until we run out of cards before we run out of players. Players that did not get any cards are represented by <code>offset[i] == offset[i+1] or offset[i] == <a class="el" href="classcudf_1_1table.html#a6f413ef7e62bf5b2863c26e98f664c54" title="Returns the number of rows.">table.num_rows()</a> if i == num_partitions-1</code> meaning there are no cards (rows) in their deck (partition).</p>
<div class="fragment"><div class="line">Example 1:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 12}</div>
<div class="line">num_partitions = 3</div>
<div class="line">start_partition = 0</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {0,3,6,9,12,1,4,7,10,2,5,8,11}</div>
<div class="line">partition_offsets =&gt; {0,5,9}</div>
<div class="line"> </div>
<div class="line">Example 2:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 12}</div>
<div class="line">num_partitions = 3</div>
<div class="line">start_partition = 1</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {2,5,8,11,0,3,6,9,12,1,4,7,10}</div>
<div class="line">partition_offsets =&gt; {0,4,9}</div>
<div class="line"> </div>
<div class="line">Example 3:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 3</div>
<div class="line">start_partition = 0</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {0,3,6,9,1,4,7,10,2,5,8}</div>
<div class="line">partition_offsets =&gt; {0,4,8}</div>
<div class="line"> </div>
<div class="line">Example 4:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 3</div>
<div class="line">start_partition = 1</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {2,5,8,0,3,6,9,1,4,7,10}</div>
<div class="line">partition_offsets =&gt; {0,3,7}</div>
<div class="line"> </div>
<div class="line">Example 5:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 3</div>
<div class="line">start_partition = 2</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {1,4,7,10,2,5,8,0,3,6,9}</div>
<div class="line">partition_offsets =&gt; {0,4,7}</div>
<div class="line"> </div>
<div class="line">Example 6:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 15 &gt; num_rows = 11</div>
<div class="line">start_partition = 2</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {0,1,2,3,4,5,6,7,8,9,10}</div>
<div class="line">partition_offsets =&gt; {0,0,0,1,2,3,4,5,6,7,8,9,10,11,11}</div>
<div class="line"> </div>
<div class="line">Example 7:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 15 &gt; num_rows = 11</div>
<div class="line">start_partition = 10</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {5,6,7,8,9,10,0,1,2,3,4}</div>
<div class="line">partition_offsets =&gt; {0,1,2,3,4,5,6,6,6,6,6,7,8,9,10}</div>
<div class="line"> </div>
<div class="line">Example 8:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 15 &gt; num_rows = 11</div>
<div class="line">start_partition = 14</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {1,2,3,4,5,6,7,8,9,10,0}</div>
<div class="line">partition_offsets =&gt; {0,1,2,3,4,5,6,7,8,9,10,10,10,10,10}</div>
<div class="line"> </div>
<div class="line">Example 9:</div>
<div class="line">input:</div>
<div class="line">table =&gt; col 1 {0, ..., 10}</div>
<div class="line">num_partitions = 11 == num_rows = 11</div>
<div class="line">start_partition = 2</div>
<div class="line"> </div>
<div class="line">output: pair&lt;table, partition_offsets&gt;</div>
<div class="line">table =&gt; col 1 {9,10,0,1,2,3,4,5,6,7,8}</div>
<div class="line">partition_offsets =&gt; {0,1,2,3,4,5,6,7,8,9,10}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tbody><tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>The input table to be round-robin partitioned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_partitions</td><td>Number of partitions for the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_partition</td><td>Index of the 1st partition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mr</td><td>Device memory resource used to allocate the returned table's device memory</td></tr>
  </tbody></table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A std::pair consisting of a unique_ptr to the partitioned table and the partition offsets for each partition within the table. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"><address class="footer"><small>
Generated by&nbsp;<a href="http://www.doxygen.org/index.html"><img alt="doxygen" class="footer" height="31" src="doxygen.svg" width="104"></a> 1.8.20
</small></address>


<script defer id="rapids-selector-js" src="/assets/js/custom.js"></script><script id="rapids-selector-pixel-invocation" type="text/javascript">_satellite.pageBottom();</script></body></html>